<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>十六 网络通信 | AGou&#39;s Docs-v2</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://infinitypro-img.infinitynewtab.com/custom-icon/8001de1jd3n68lbfnxxt564xvb0vl5.png?imageMogr2/thumbnail/240x/format/webp/blur/1x0/quality/100|imageslim">
    <script language="javascript" type="text/javascript" src="https://cdn.staticfile.org/jquery/1.7.2/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-2DZCW6NJZF"></script>
    <script language="javascript" type="text/javascript" content="function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag(&quot;js&quot;,new Date),gtag(&quot;config&quot;,&quot;G-2DZCW6NJZF&quot;);"></script>
    <meta name="description" content="岂能尽如人意，但求无愧我心。">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/myDocsv2/assets/css/0.styles.21bb8301.css" as="style"><link rel="preload" href="/myDocsv2/assets/js/app.792c833e.js" as="script"><link rel="preload" href="/myDocsv2/assets/js/5.dd197eb6.js" as="script"><link rel="preload" href="/myDocsv2/assets/js/1.3bd7010a.js" as="script"><link rel="preload" href="/myDocsv2/assets/js/2.0c757b52.js" as="script"><link rel="preload" href="/myDocsv2/assets/js/68.6c730d30.js" as="script"><link rel="preload" href="/myDocsv2/assets/js/17.ce9a229a.js" as="script"><link rel="prefetch" href="/myDocsv2/assets/js/10.560f0585.js"><link rel="prefetch" href="/myDocsv2/assets/js/100.d260e792.js"><link rel="prefetch" href="/myDocsv2/assets/js/101.59a52c3b.js"><link rel="prefetch" href="/myDocsv2/assets/js/102.c83fe080.js"><link rel="prefetch" href="/myDocsv2/assets/js/103.486f1569.js"><link rel="prefetch" href="/myDocsv2/assets/js/104.147ef422.js"><link rel="prefetch" href="/myDocsv2/assets/js/105.7cdddb7f.js"><link rel="prefetch" href="/myDocsv2/assets/js/106.6bb6504a.js"><link rel="prefetch" href="/myDocsv2/assets/js/107.958c4a2e.js"><link rel="prefetch" href="/myDocsv2/assets/js/108.89dea5fa.js"><link rel="prefetch" href="/myDocsv2/assets/js/109.25e918a2.js"><link rel="prefetch" href="/myDocsv2/assets/js/11.30085370.js"><link rel="prefetch" href="/myDocsv2/assets/js/110.5b72de31.js"><link rel="prefetch" href="/myDocsv2/assets/js/111.950db23b.js"><link rel="prefetch" href="/myDocsv2/assets/js/112.dea68ec6.js"><link rel="prefetch" href="/myDocsv2/assets/js/113.4cd2fdf5.js"><link rel="prefetch" href="/myDocsv2/assets/js/114.8fb68b8d.js"><link rel="prefetch" href="/myDocsv2/assets/js/115.853e9eac.js"><link rel="prefetch" href="/myDocsv2/assets/js/116.370ed12f.js"><link rel="prefetch" href="/myDocsv2/assets/js/117.e54ab1d2.js"><link rel="prefetch" href="/myDocsv2/assets/js/118.f875192d.js"><link rel="prefetch" href="/myDocsv2/assets/js/119.130ba6df.js"><link rel="prefetch" href="/myDocsv2/assets/js/12.bad43817.js"><link rel="prefetch" href="/myDocsv2/assets/js/120.ea722a75.js"><link rel="prefetch" href="/myDocsv2/assets/js/121.e6b1a38f.js"><link rel="prefetch" href="/myDocsv2/assets/js/122.cfa9c92b.js"><link rel="prefetch" href="/myDocsv2/assets/js/123.bd0e517c.js"><link rel="prefetch" href="/myDocsv2/assets/js/124.516b8976.js"><link rel="prefetch" href="/myDocsv2/assets/js/125.aa9491a0.js"><link rel="prefetch" href="/myDocsv2/assets/js/126.249ad6f3.js"><link rel="prefetch" href="/myDocsv2/assets/js/127.15e07998.js"><link rel="prefetch" href="/myDocsv2/assets/js/128.6e4e1f1d.js"><link rel="prefetch" href="/myDocsv2/assets/js/129.9fa7ef9d.js"><link rel="prefetch" href="/myDocsv2/assets/js/13.4f93795a.js"><link rel="prefetch" href="/myDocsv2/assets/js/130.7ed7958f.js"><link rel="prefetch" href="/myDocsv2/assets/js/131.6a4ed50f.js"><link rel="prefetch" href="/myDocsv2/assets/js/132.60d2ac03.js"><link rel="prefetch" href="/myDocsv2/assets/js/133.657186df.js"><link rel="prefetch" href="/myDocsv2/assets/js/134.de4a0998.js"><link rel="prefetch" href="/myDocsv2/assets/js/135.773bff70.js"><link rel="prefetch" href="/myDocsv2/assets/js/136.03b7adc5.js"><link rel="prefetch" href="/myDocsv2/assets/js/137.e59abdb8.js"><link rel="prefetch" href="/myDocsv2/assets/js/138.b00ee386.js"><link rel="prefetch" href="/myDocsv2/assets/js/139.11d16ca5.js"><link rel="prefetch" href="/myDocsv2/assets/js/14.5b43ffdb.js"><link rel="prefetch" href="/myDocsv2/assets/js/140.d2461af0.js"><link rel="prefetch" href="/myDocsv2/assets/js/141.51a02429.js"><link rel="prefetch" href="/myDocsv2/assets/js/142.de00d6b2.js"><link rel="prefetch" href="/myDocsv2/assets/js/143.2e00599f.js"><link rel="prefetch" href="/myDocsv2/assets/js/144.d91b742b.js"><link rel="prefetch" href="/myDocsv2/assets/js/145.fd4eeb59.js"><link rel="prefetch" href="/myDocsv2/assets/js/146.2da768b9.js"><link rel="prefetch" href="/myDocsv2/assets/js/147.2392d1bd.js"><link rel="prefetch" href="/myDocsv2/assets/js/148.3f9f1e85.js"><link rel="prefetch" href="/myDocsv2/assets/js/149.ccc77b35.js"><link rel="prefetch" href="/myDocsv2/assets/js/15.567b35e8.js"><link rel="prefetch" href="/myDocsv2/assets/js/150.bc27fad5.js"><link rel="prefetch" href="/myDocsv2/assets/js/151.8d88bccd.js"><link rel="prefetch" href="/myDocsv2/assets/js/152.2f8b753c.js"><link rel="prefetch" href="/myDocsv2/assets/js/153.3e99f777.js"><link rel="prefetch" href="/myDocsv2/assets/js/154.28a03309.js"><link rel="prefetch" href="/myDocsv2/assets/js/155.d31e6da9.js"><link rel="prefetch" href="/myDocsv2/assets/js/156.dbbb018d.js"><link rel="prefetch" href="/myDocsv2/assets/js/157.dacf2c34.js"><link rel="prefetch" href="/myDocsv2/assets/js/158.92d5a5c7.js"><link rel="prefetch" href="/myDocsv2/assets/js/159.163e1ce5.js"><link rel="prefetch" href="/myDocsv2/assets/js/16.246dc068.js"><link rel="prefetch" href="/myDocsv2/assets/js/160.f6373d44.js"><link rel="prefetch" href="/myDocsv2/assets/js/161.1ee05cbb.js"><link rel="prefetch" href="/myDocsv2/assets/js/162.90d44205.js"><link rel="prefetch" href="/myDocsv2/assets/js/163.0ab9f4cc.js"><link rel="prefetch" href="/myDocsv2/assets/js/164.e7b76b81.js"><link rel="prefetch" href="/myDocsv2/assets/js/165.f4e96a57.js"><link rel="prefetch" href="/myDocsv2/assets/js/166.9da04171.js"><link rel="prefetch" href="/myDocsv2/assets/js/167.7869b189.js"><link rel="prefetch" href="/myDocsv2/assets/js/168.fd171306.js"><link rel="prefetch" href="/myDocsv2/assets/js/169.a3accba0.js"><link rel="prefetch" href="/myDocsv2/assets/js/170.69b8ea3d.js"><link rel="prefetch" href="/myDocsv2/assets/js/171.8519d41a.js"><link rel="prefetch" href="/myDocsv2/assets/js/172.853e162a.js"><link rel="prefetch" href="/myDocsv2/assets/js/173.61f68a82.js"><link rel="prefetch" href="/myDocsv2/assets/js/174.4a6c4ebe.js"><link rel="prefetch" href="/myDocsv2/assets/js/175.4da076f8.js"><link rel="prefetch" href="/myDocsv2/assets/js/176.db59955f.js"><link rel="prefetch" href="/myDocsv2/assets/js/177.8e8a7c16.js"><link rel="prefetch" href="/myDocsv2/assets/js/178.c253fb27.js"><link rel="prefetch" href="/myDocsv2/assets/js/179.5662c8f8.js"><link rel="prefetch" href="/myDocsv2/assets/js/18.42c2a799.js"><link rel="prefetch" href="/myDocsv2/assets/js/180.54165af7.js"><link rel="prefetch" href="/myDocsv2/assets/js/181.e07c952b.js"><link rel="prefetch" href="/myDocsv2/assets/js/182.53626bff.js"><link rel="prefetch" href="/myDocsv2/assets/js/183.b92c4e7a.js"><link rel="prefetch" href="/myDocsv2/assets/js/184.640e2011.js"><link rel="prefetch" href="/myDocsv2/assets/js/185.82c83e0f.js"><link rel="prefetch" href="/myDocsv2/assets/js/186.0e7a9c8a.js"><link rel="prefetch" href="/myDocsv2/assets/js/187.b1279218.js"><link rel="prefetch" href="/myDocsv2/assets/js/188.919e8202.js"><link rel="prefetch" href="/myDocsv2/assets/js/189.12ca6319.js"><link rel="prefetch" href="/myDocsv2/assets/js/19.80fbdf4d.js"><link rel="prefetch" href="/myDocsv2/assets/js/190.0cabf0ec.js"><link rel="prefetch" href="/myDocsv2/assets/js/191.4473c05d.js"><link rel="prefetch" href="/myDocsv2/assets/js/192.cfd1676f.js"><link rel="prefetch" href="/myDocsv2/assets/js/193.be924226.js"><link rel="prefetch" href="/myDocsv2/assets/js/194.28405918.js"><link rel="prefetch" href="/myDocsv2/assets/js/195.895d8931.js"><link rel="prefetch" href="/myDocsv2/assets/js/196.a5074835.js"><link rel="prefetch" href="/myDocsv2/assets/js/197.5ac7add8.js"><link rel="prefetch" href="/myDocsv2/assets/js/198.1243e120.js"><link rel="prefetch" href="/myDocsv2/assets/js/199.1dedd774.js"><link rel="prefetch" href="/myDocsv2/assets/js/20.03b1f0ff.js"><link rel="prefetch" href="/myDocsv2/assets/js/200.47677147.js"><link rel="prefetch" href="/myDocsv2/assets/js/201.ae7c32ad.js"><link rel="prefetch" href="/myDocsv2/assets/js/202.b9ab3aba.js"><link rel="prefetch" href="/myDocsv2/assets/js/203.5716a175.js"><link rel="prefetch" href="/myDocsv2/assets/js/204.0dff0870.js"><link rel="prefetch" href="/myDocsv2/assets/js/205.5722c8b0.js"><link rel="prefetch" href="/myDocsv2/assets/js/206.94ecd56d.js"><link rel="prefetch" href="/myDocsv2/assets/js/207.fbef39ad.js"><link rel="prefetch" href="/myDocsv2/assets/js/208.f033c96a.js"><link rel="prefetch" href="/myDocsv2/assets/js/209.b022ee5b.js"><link rel="prefetch" href="/myDocsv2/assets/js/21.2048f6fd.js"><link rel="prefetch" href="/myDocsv2/assets/js/210.c8278e5f.js"><link rel="prefetch" href="/myDocsv2/assets/js/211.df648ec4.js"><link rel="prefetch" href="/myDocsv2/assets/js/212.c591597e.js"><link rel="prefetch" href="/myDocsv2/assets/js/213.59dd0072.js"><link rel="prefetch" href="/myDocsv2/assets/js/214.4250b8d5.js"><link rel="prefetch" href="/myDocsv2/assets/js/215.06bf9012.js"><link rel="prefetch" href="/myDocsv2/assets/js/216.f9f569dc.js"><link rel="prefetch" href="/myDocsv2/assets/js/217.0d90efa0.js"><link rel="prefetch" href="/myDocsv2/assets/js/218.941f9041.js"><link rel="prefetch" href="/myDocsv2/assets/js/219.087abc3e.js"><link rel="prefetch" href="/myDocsv2/assets/js/22.1468e026.js"><link rel="prefetch" href="/myDocsv2/assets/js/220.4519068e.js"><link rel="prefetch" href="/myDocsv2/assets/js/221.020f293f.js"><link rel="prefetch" href="/myDocsv2/assets/js/222.0eabad26.js"><link rel="prefetch" href="/myDocsv2/assets/js/223.ad574537.js"><link rel="prefetch" href="/myDocsv2/assets/js/224.ae6d0b7a.js"><link rel="prefetch" href="/myDocsv2/assets/js/225.8a723b88.js"><link rel="prefetch" href="/myDocsv2/assets/js/226.7285c5f4.js"><link rel="prefetch" href="/myDocsv2/assets/js/227.a14fc969.js"><link rel="prefetch" href="/myDocsv2/assets/js/228.66daebef.js"><link rel="prefetch" href="/myDocsv2/assets/js/229.6403de74.js"><link rel="prefetch" href="/myDocsv2/assets/js/23.e667901e.js"><link rel="prefetch" href="/myDocsv2/assets/js/230.03323ece.js"><link rel="prefetch" href="/myDocsv2/assets/js/231.f3295fcb.js"><link rel="prefetch" href="/myDocsv2/assets/js/232.9c83055f.js"><link rel="prefetch" href="/myDocsv2/assets/js/233.169da2a3.js"><link rel="prefetch" href="/myDocsv2/assets/js/234.2c098527.js"><link rel="prefetch" href="/myDocsv2/assets/js/235.62700dfa.js"><link rel="prefetch" href="/myDocsv2/assets/js/236.f682323d.js"><link rel="prefetch" href="/myDocsv2/assets/js/237.60773b74.js"><link rel="prefetch" href="/myDocsv2/assets/js/238.fb376db3.js"><link rel="prefetch" href="/myDocsv2/assets/js/239.21fe9787.js"><link rel="prefetch" href="/myDocsv2/assets/js/24.18db0e43.js"><link rel="prefetch" href="/myDocsv2/assets/js/240.412b1fd5.js"><link rel="prefetch" href="/myDocsv2/assets/js/241.eb5e205b.js"><link rel="prefetch" href="/myDocsv2/assets/js/242.1b505ffe.js"><link rel="prefetch" href="/myDocsv2/assets/js/243.07e81cfd.js"><link rel="prefetch" href="/myDocsv2/assets/js/244.82c529d0.js"><link rel="prefetch" href="/myDocsv2/assets/js/245.c3458778.js"><link rel="prefetch" href="/myDocsv2/assets/js/246.66e98887.js"><link rel="prefetch" href="/myDocsv2/assets/js/247.1a0993dd.js"><link rel="prefetch" href="/myDocsv2/assets/js/248.a63069b1.js"><link rel="prefetch" href="/myDocsv2/assets/js/249.dd372d75.js"><link rel="prefetch" href="/myDocsv2/assets/js/25.285160e4.js"><link rel="prefetch" href="/myDocsv2/assets/js/250.eb634570.js"><link rel="prefetch" href="/myDocsv2/assets/js/251.f04a5705.js"><link rel="prefetch" href="/myDocsv2/assets/js/252.6ad19080.js"><link rel="prefetch" href="/myDocsv2/assets/js/253.dd154571.js"><link rel="prefetch" href="/myDocsv2/assets/js/254.230b3e5e.js"><link rel="prefetch" href="/myDocsv2/assets/js/255.d40d9e7e.js"><link rel="prefetch" href="/myDocsv2/assets/js/256.28281885.js"><link rel="prefetch" href="/myDocsv2/assets/js/257.6298bda8.js"><link rel="prefetch" href="/myDocsv2/assets/js/258.2fefa56c.js"><link rel="prefetch" href="/myDocsv2/assets/js/259.cb5aea63.js"><link rel="prefetch" href="/myDocsv2/assets/js/26.fae61a7f.js"><link rel="prefetch" href="/myDocsv2/assets/js/260.b29da0f4.js"><link rel="prefetch" href="/myDocsv2/assets/js/261.3db0aa59.js"><link rel="prefetch" href="/myDocsv2/assets/js/262.0b3015b0.js"><link rel="prefetch" href="/myDocsv2/assets/js/263.7577edc3.js"><link rel="prefetch" href="/myDocsv2/assets/js/264.5ff38add.js"><link rel="prefetch" href="/myDocsv2/assets/js/265.e339901e.js"><link rel="prefetch" href="/myDocsv2/assets/js/266.a2027a85.js"><link rel="prefetch" href="/myDocsv2/assets/js/267.08188cb1.js"><link rel="prefetch" href="/myDocsv2/assets/js/268.d30558f8.js"><link rel="prefetch" href="/myDocsv2/assets/js/269.aa62020a.js"><link rel="prefetch" href="/myDocsv2/assets/js/27.b1a4cdea.js"><link rel="prefetch" href="/myDocsv2/assets/js/270.56fe4e52.js"><link rel="prefetch" href="/myDocsv2/assets/js/271.4dbe5ca9.js"><link rel="prefetch" href="/myDocsv2/assets/js/272.ebb4279a.js"><link rel="prefetch" href="/myDocsv2/assets/js/273.82120a56.js"><link rel="prefetch" href="/myDocsv2/assets/js/274.409c4f82.js"><link rel="prefetch" href="/myDocsv2/assets/js/275.b1030128.js"><link rel="prefetch" href="/myDocsv2/assets/js/276.e35f1ba0.js"><link rel="prefetch" href="/myDocsv2/assets/js/277.78b42eab.js"><link rel="prefetch" href="/myDocsv2/assets/js/278.1d224e38.js"><link rel="prefetch" href="/myDocsv2/assets/js/279.5c7dd3ae.js"><link rel="prefetch" href="/myDocsv2/assets/js/28.e9c369f8.js"><link rel="prefetch" href="/myDocsv2/assets/js/280.07aa017e.js"><link rel="prefetch" href="/myDocsv2/assets/js/281.dcb43aec.js"><link rel="prefetch" href="/myDocsv2/assets/js/282.22bc522a.js"><link rel="prefetch" href="/myDocsv2/assets/js/283.c8474c90.js"><link rel="prefetch" href="/myDocsv2/assets/js/284.581fa5ab.js"><link rel="prefetch" href="/myDocsv2/assets/js/285.208c4406.js"><link rel="prefetch" href="/myDocsv2/assets/js/286.5e6c6df0.js"><link rel="prefetch" href="/myDocsv2/assets/js/287.acef2acc.js"><link rel="prefetch" href="/myDocsv2/assets/js/288.ae3f5d32.js"><link rel="prefetch" href="/myDocsv2/assets/js/289.039c32e1.js"><link rel="prefetch" href="/myDocsv2/assets/js/29.a3644474.js"><link rel="prefetch" href="/myDocsv2/assets/js/290.80dfce69.js"><link rel="prefetch" href="/myDocsv2/assets/js/291.9396076f.js"><link rel="prefetch" href="/myDocsv2/assets/js/292.aafda658.js"><link rel="prefetch" href="/myDocsv2/assets/js/293.9d432ff9.js"><link rel="prefetch" href="/myDocsv2/assets/js/294.9bd1328b.js"><link rel="prefetch" href="/myDocsv2/assets/js/295.272f5c7a.js"><link rel="prefetch" href="/myDocsv2/assets/js/296.0cc8fe44.js"><link rel="prefetch" href="/myDocsv2/assets/js/297.67a972ae.js"><link rel="prefetch" href="/myDocsv2/assets/js/298.9d16d98c.js"><link rel="prefetch" href="/myDocsv2/assets/js/299.0f04c0eb.js"><link rel="prefetch" href="/myDocsv2/assets/js/30.b5a32504.js"><link rel="prefetch" href="/myDocsv2/assets/js/300.d4e215e6.js"><link rel="prefetch" href="/myDocsv2/assets/js/301.60d51efc.js"><link rel="prefetch" href="/myDocsv2/assets/js/302.abb371d9.js"><link rel="prefetch" href="/myDocsv2/assets/js/303.b22b36ac.js"><link rel="prefetch" href="/myDocsv2/assets/js/304.3261e7b2.js"><link rel="prefetch" href="/myDocsv2/assets/js/305.807e25af.js"><link rel="prefetch" href="/myDocsv2/assets/js/306.fe10f19e.js"><link rel="prefetch" href="/myDocsv2/assets/js/307.9f74b43c.js"><link rel="prefetch" href="/myDocsv2/assets/js/308.b8c9f8e6.js"><link rel="prefetch" href="/myDocsv2/assets/js/309.1e5c14f9.js"><link rel="prefetch" href="/myDocsv2/assets/js/31.12707513.js"><link rel="prefetch" href="/myDocsv2/assets/js/310.911f38ce.js"><link rel="prefetch" href="/myDocsv2/assets/js/311.3940d290.js"><link rel="prefetch" href="/myDocsv2/assets/js/312.af9de452.js"><link rel="prefetch" href="/myDocsv2/assets/js/313.e10357a1.js"><link rel="prefetch" href="/myDocsv2/assets/js/314.8d732c56.js"><link rel="prefetch" href="/myDocsv2/assets/js/315.97345578.js"><link rel="prefetch" href="/myDocsv2/assets/js/316.5de46f5d.js"><link rel="prefetch" href="/myDocsv2/assets/js/317.ecbaee88.js"><link rel="prefetch" href="/myDocsv2/assets/js/318.f16657b3.js"><link rel="prefetch" href="/myDocsv2/assets/js/319.e9fc2b8b.js"><link rel="prefetch" href="/myDocsv2/assets/js/32.4794eb28.js"><link rel="prefetch" href="/myDocsv2/assets/js/320.87a080c9.js"><link rel="prefetch" href="/myDocsv2/assets/js/321.dc421947.js"><link rel="prefetch" href="/myDocsv2/assets/js/322.0d8f158f.js"><link rel="prefetch" href="/myDocsv2/assets/js/323.9feb5296.js"><link rel="prefetch" href="/myDocsv2/assets/js/324.11b428d5.js"><link rel="prefetch" href="/myDocsv2/assets/js/325.51e26ebb.js"><link rel="prefetch" href="/myDocsv2/assets/js/326.d7c9128a.js"><link rel="prefetch" href="/myDocsv2/assets/js/327.d2a1a3da.js"><link rel="prefetch" href="/myDocsv2/assets/js/328.f3119b29.js"><link rel="prefetch" href="/myDocsv2/assets/js/329.01ae2bb1.js"><link rel="prefetch" href="/myDocsv2/assets/js/33.7e8c531c.js"><link rel="prefetch" href="/myDocsv2/assets/js/330.757b5be7.js"><link rel="prefetch" href="/myDocsv2/assets/js/331.335622c4.js"><link rel="prefetch" href="/myDocsv2/assets/js/332.79b5dfeb.js"><link rel="prefetch" href="/myDocsv2/assets/js/333.b5bff6cd.js"><link rel="prefetch" href="/myDocsv2/assets/js/334.b4e9badb.js"><link rel="prefetch" href="/myDocsv2/assets/js/335.aed5ff57.js"><link rel="prefetch" href="/myDocsv2/assets/js/336.14ce19b1.js"><link rel="prefetch" href="/myDocsv2/assets/js/337.f0e871b6.js"><link rel="prefetch" href="/myDocsv2/assets/js/338.ba74f399.js"><link rel="prefetch" href="/myDocsv2/assets/js/339.e308e875.js"><link rel="prefetch" href="/myDocsv2/assets/js/34.76ac76e5.js"><link rel="prefetch" href="/myDocsv2/assets/js/340.8afe9761.js"><link rel="prefetch" href="/myDocsv2/assets/js/341.5f7f2739.js"><link rel="prefetch" href="/myDocsv2/assets/js/342.856b7535.js"><link rel="prefetch" href="/myDocsv2/assets/js/343.b71213f5.js"><link rel="prefetch" href="/myDocsv2/assets/js/344.4e9b4c16.js"><link rel="prefetch" href="/myDocsv2/assets/js/345.fde23f4c.js"><link rel="prefetch" href="/myDocsv2/assets/js/346.20b96938.js"><link rel="prefetch" href="/myDocsv2/assets/js/347.476680bb.js"><link rel="prefetch" href="/myDocsv2/assets/js/348.ecf44b79.js"><link rel="prefetch" href="/myDocsv2/assets/js/349.19235284.js"><link rel="prefetch" href="/myDocsv2/assets/js/35.b761363a.js"><link rel="prefetch" href="/myDocsv2/assets/js/350.42e4d37c.js"><link rel="prefetch" href="/myDocsv2/assets/js/351.6982f677.js"><link rel="prefetch" href="/myDocsv2/assets/js/352.f17e6bce.js"><link rel="prefetch" href="/myDocsv2/assets/js/353.2be51bc7.js"><link rel="prefetch" href="/myDocsv2/assets/js/354.77f5d2fb.js"><link rel="prefetch" href="/myDocsv2/assets/js/355.f6285383.js"><link rel="prefetch" href="/myDocsv2/assets/js/356.94418b9f.js"><link rel="prefetch" href="/myDocsv2/assets/js/357.b8b20e21.js"><link rel="prefetch" href="/myDocsv2/assets/js/358.1b2e896c.js"><link rel="prefetch" href="/myDocsv2/assets/js/36.34a14d0e.js"><link rel="prefetch" href="/myDocsv2/assets/js/37.aa4916db.js"><link rel="prefetch" href="/myDocsv2/assets/js/38.deb490d2.js"><link rel="prefetch" href="/myDocsv2/assets/js/39.8672f15d.js"><link rel="prefetch" href="/myDocsv2/assets/js/40.644dee16.js"><link rel="prefetch" href="/myDocsv2/assets/js/41.1b06014c.js"><link rel="prefetch" href="/myDocsv2/assets/js/42.e7ff72f1.js"><link rel="prefetch" href="/myDocsv2/assets/js/43.02a62ac3.js"><link rel="prefetch" href="/myDocsv2/assets/js/44.cd8672e0.js"><link rel="prefetch" href="/myDocsv2/assets/js/45.02596789.js"><link rel="prefetch" href="/myDocsv2/assets/js/46.a1c40368.js"><link rel="prefetch" href="/myDocsv2/assets/js/47.8d8b2f4d.js"><link rel="prefetch" href="/myDocsv2/assets/js/48.5dadf9f0.js"><link rel="prefetch" href="/myDocsv2/assets/js/49.ea5bbb89.js"><link rel="prefetch" href="/myDocsv2/assets/js/50.ad180d98.js"><link rel="prefetch" href="/myDocsv2/assets/js/51.0df9f4e8.js"><link rel="prefetch" href="/myDocsv2/assets/js/52.f04a6e1b.js"><link rel="prefetch" href="/myDocsv2/assets/js/53.74f2f2cf.js"><link rel="prefetch" href="/myDocsv2/assets/js/54.e8578653.js"><link rel="prefetch" href="/myDocsv2/assets/js/55.79a1b789.js"><link rel="prefetch" href="/myDocsv2/assets/js/56.693e099d.js"><link rel="prefetch" href="/myDocsv2/assets/js/57.82c7c63a.js"><link rel="prefetch" href="/myDocsv2/assets/js/58.15dea23c.js"><link rel="prefetch" href="/myDocsv2/assets/js/59.63d66b63.js"><link rel="prefetch" href="/myDocsv2/assets/js/6.97e7a4cb.js"><link rel="prefetch" href="/myDocsv2/assets/js/60.80a3efc6.js"><link rel="prefetch" href="/myDocsv2/assets/js/61.3f648458.js"><link rel="prefetch" href="/myDocsv2/assets/js/62.991be8f4.js"><link rel="prefetch" href="/myDocsv2/assets/js/63.c70d0dfb.js"><link rel="prefetch" href="/myDocsv2/assets/js/64.cbfa33ab.js"><link rel="prefetch" href="/myDocsv2/assets/js/65.f89bbfb7.js"><link rel="prefetch" href="/myDocsv2/assets/js/66.70c68ea1.js"><link rel="prefetch" href="/myDocsv2/assets/js/67.27436099.js"><link rel="prefetch" href="/myDocsv2/assets/js/69.31e87a96.js"><link rel="prefetch" href="/myDocsv2/assets/js/7.b469f62b.js"><link rel="prefetch" href="/myDocsv2/assets/js/70.66a0fe4e.js"><link rel="prefetch" href="/myDocsv2/assets/js/71.150be7fc.js"><link rel="prefetch" href="/myDocsv2/assets/js/72.a2b6c89a.js"><link rel="prefetch" href="/myDocsv2/assets/js/73.65559007.js"><link rel="prefetch" href="/myDocsv2/assets/js/74.f61e2991.js"><link rel="prefetch" href="/myDocsv2/assets/js/75.fde71997.js"><link rel="prefetch" href="/myDocsv2/assets/js/76.cf3d3a31.js"><link rel="prefetch" href="/myDocsv2/assets/js/77.36633bd8.js"><link rel="prefetch" href="/myDocsv2/assets/js/78.82d49b8f.js"><link rel="prefetch" href="/myDocsv2/assets/js/79.6c213d15.js"><link rel="prefetch" href="/myDocsv2/assets/js/8.ebe4b359.js"><link rel="prefetch" href="/myDocsv2/assets/js/80.e6ee5654.js"><link rel="prefetch" href="/myDocsv2/assets/js/81.2d6febe8.js"><link rel="prefetch" href="/myDocsv2/assets/js/82.b1d7c015.js"><link rel="prefetch" href="/myDocsv2/assets/js/83.e4d15d98.js"><link rel="prefetch" href="/myDocsv2/assets/js/84.98d75c07.js"><link rel="prefetch" href="/myDocsv2/assets/js/85.8bd12af2.js"><link rel="prefetch" href="/myDocsv2/assets/js/86.3bc59854.js"><link rel="prefetch" href="/myDocsv2/assets/js/87.c26415ef.js"><link rel="prefetch" href="/myDocsv2/assets/js/88.12cc1dae.js"><link rel="prefetch" href="/myDocsv2/assets/js/89.1e08c26e.js"><link rel="prefetch" href="/myDocsv2/assets/js/9.bd9ef1a2.js"><link rel="prefetch" href="/myDocsv2/assets/js/90.4d879007.js"><link rel="prefetch" href="/myDocsv2/assets/js/91.089c1c17.js"><link rel="prefetch" href="/myDocsv2/assets/js/92.5aec83b9.js"><link rel="prefetch" href="/myDocsv2/assets/js/93.efe44a21.js"><link rel="prefetch" href="/myDocsv2/assets/js/94.ffc75f13.js"><link rel="prefetch" href="/myDocsv2/assets/js/95.d2012256.js"><link rel="prefetch" href="/myDocsv2/assets/js/96.87fef0cb.js"><link rel="prefetch" href="/myDocsv2/assets/js/97.aae1fc0b.js"><link rel="prefetch" href="/myDocsv2/assets/js/98.5f33b8aa.js"><link rel="prefetch" href="/myDocsv2/assets/js/99.f3fbb5db.js"><link rel="prefetch" href="/myDocsv2/assets/js/vendors~flowchart.f05697d3.js">
    <link rel="stylesheet" href="/myDocsv2/assets/css/0.styles.21bb8301.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-584a622c><div data-v-584a622c><div id="loader-wrapper" class="loading-wrapper" data-v-1c4f0192 data-v-584a622c data-v-584a622c><div class="loader-main" data-v-1c4f0192><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-73c95a87 data-v-584a622c data-v-584a622c><h3 class="title" style="display:none;" data-v-73c95a87 data-v-73c95a87>AGou's Docs-v2</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-73c95a87 data-v-73c95a87><input type="password" value="" data-v-73c95a87> <span data-v-73c95a87>Konck! Knock!</span> <button data-v-73c95a87>OK</button></label> <div class="footer" style="display:none;" data-v-73c95a87 data-v-73c95a87><span data-v-73c95a87><i class="iconfont reco-theme" data-v-73c95a87></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-73c95a87>vuePress-theme-reco</a></span> <span data-v-73c95a87><i class="iconfont reco-copyright" data-v-73c95a87></i> <a data-v-73c95a87><span data-v-73c95a87>AGou-ops</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-584a622c><header class="navbar" data-v-584a622c><div title="导航" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myDocsv2/" class="home-link router-link-active"><img src="/myDocsv2/favicon.png" alt="AGou's Docs-v2" class="logo"> <span class="site-name">AGou's Docs-v2</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myDocsv2/timeline/" class="nav-link"><i class="iconfont undefined"></i>
  🕟时间线
</a></div><div class="nav-item"><a href="/myDocsv2/" class="nav-link"><i class="iconfont undefined"></i>
  🏠Home
</a></div><div class="nav-item"><a href="/myDocsv2/guide/" class="nav-link"><i class="iconfont undefined"></i>
  🗺️Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      📄其它
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myDocsv2/Golang/" class="nav-link"><i class="iconfont undefined"></i>
  📚Golang
</a></li><li class="dropdown-item"><!----> <a href="/myDocsv2/k8s/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  🚢K8s
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      版本
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://agou-ops.cn/myDocs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ver 1.0
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://agou-ops.cn/myDocsv2" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ver 2.0
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://agou-ops.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ✨myBlog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/AGou-ops/myDocsv2" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-584a622c></div> <aside class="sidebar" data-v-584a622c><div class="personal-info-wrapper" data-v-7e653f02><img src="/myDocsv2/favicon.png" alt="author-avatar" class="personal-img" data-v-7e653f02> <h3 class="name" data-v-7e653f02>
    AGou-ops
  </h3> <div class="num" data-v-7e653f02><div data-v-7e653f02><h3 data-v-7e653f02>2</h3> <h6 data-v-7e653f02>文章</h6></div> <div data-v-7e653f02><h3 data-v-7e653f02>1</h3> <h6 data-v-7e653f02>标签</h6></div></div> <hr data-v-7e653f02></div> <nav class="nav-links"><div class="nav-item"><a href="/myDocsv2/timeline/" class="nav-link"><i class="iconfont undefined"></i>
  🕟时间线
</a></div><div class="nav-item"><a href="/myDocsv2/" class="nav-link"><i class="iconfont undefined"></i>
  🏠Home
</a></div><div class="nav-item"><a href="/myDocsv2/guide/" class="nav-link"><i class="iconfont undefined"></i>
  🗺️Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      📄其它
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myDocsv2/Golang/" class="nav-link"><i class="iconfont undefined"></i>
  📚Golang
</a></li><li class="dropdown-item"><!----> <a href="/myDocsv2/k8s/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  🚢K8s
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      版本
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://agou-ops.cn/myDocs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ver 1.0
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://agou-ops.cn/myDocsv2" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ver 2.0
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://agou-ops.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ✨myBlog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/AGou-ops/myDocsv2" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/myDocsv2/k8s/Installation/" class="sidebar-heading clickable"><span>K8s Installation</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/myDocsv2/k8s/实战案例/" class="sidebar-heading clickable"><span>K8s 实战案例</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/myDocsv2/k8s/Quicklystart/" class="sidebar-heading clickable router-link-active open"><span>k8s 快速手册</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/myDocsv2/k8s/Quicklystart/一 Kubernetes概述.html" class="sidebar-link">一 Kubernetes概述</a></li><li><a href="/myDocsv2/k8s/Quicklystart/二 核心组件及附件.html" class="sidebar-link">二 核心组件及附件</a></li><li><a href="/myDocsv2/k8s/Quicklystart/三 集群部署.html" class="sidebar-link">三 集群部署</a></li><li><a href="/myDocsv2/k8s/Quicklystart/四 入门命令.html" class="sidebar-link">四 入门命令</a></li><li><a href="/myDocsv2/k8s/Quicklystart/五 配置清单使用.html" class="sidebar-link">五 配置清单使用</a></li><li><a href="/myDocsv2/k8s/Quicklystart/六 POD 配置清单.html" class="sidebar-link">六 POD 配置清单</a></li><li><a href="/myDocsv2/k8s/Quicklystart/七 控制器配置清单.html" class="sidebar-link">七 控制器配置清单</a></li><li><a href="/myDocsv2/k8s/Quicklystart/八 Service 配置清单.html" class="sidebar-link">八 Service 配置清单</a></li><li><a href="/myDocsv2/k8s/Quicklystart/九 ingress 控制器.html" class="sidebar-link">九 ingress 控制器</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十 POD 存储卷.html" class="sidebar-link">十 POD 存储卷</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十一 配置信息容器化.html" class="sidebar-link">十一 配置信息容器化</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十二 StatefulSet 控制器.html" class="sidebar-link">十二 StatefulSet 控制器</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十三 用户认证系统.html" class="sidebar-link">十三 用户认证系统</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十四 用户权限系统.html" class="sidebar-link">十四 用户权限系统</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十五 dashboard.html" class="sidebar-link">十五 dashboard</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html" class="active sidebar-link">十六 网络通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-1-通信模型" class="sidebar-link">16.1 通信模型</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-2-通信模型底层" class="sidebar-link">16.2 通信模型底层</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-3-k8s-名称空间" class="sidebar-link">16.3 K8S 名称空间</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-4-k8s网络拓扑" class="sidebar-link">16.4 K8S网络拓扑</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-5-flannel" class="sidebar-link">16.5 flannel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-5-1-flannel-工作模式" class="sidebar-link">16.5.1 flannel 工作模式</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-5-2-vxlan-通信过程" class="sidebar-link">16.5.2 VXLAN 通信过程</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-5-3-flannel-部署方式" class="sidebar-link">16.5.3 flannel 部署方式</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-5-4flannel-配置文件" class="sidebar-link">16.5.4flannel 配置文件</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-5-5-修改工作模式" class="sidebar-link">16.5.5 修改工作模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-6-calico" class="sidebar-link">16.6 Calico</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-6-1-安装-canal" class="sidebar-link">16.6.1 安装 canal</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-6-2-清单定义" class="sidebar-link">16.6.2 清单定义</a></li><li class="sidebar-sub-header"><a href="/myDocsv2/k8s/Quicklystart/十六 网络通信.html#_16-6-3-policytypes" class="sidebar-link">16.6.3 policyTypes</a></li></ul></li></ul></li><li><a href="/myDocsv2/k8s/Quicklystart/十七 调度策略.html" class="sidebar-link">十七 调度策略</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十八 高级调度设置.html" class="sidebar-link">十八 高级调度设置</a></li><li><a href="/myDocsv2/k8s/Quicklystart/十九 容器资源限制.html" class="sidebar-link">十九 容器资源限制</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/myDocsv2/k8s/Helm/" class="sidebar-heading clickable"><span>Helm</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-0"><a href="/myDocsv2/k8s/" class="sidebar-heading clickable router-link-active"><span>Others</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/myDocsv2/k8s/Kubernetes Yaml quicklystart.html" class="sidebar-link">⭐k8s Yaml quicklystart</a></li><li><a href="/myDocsv2/k8s/k8s command.html" class="sidebar-link">⭐k8s command quicklystart</a></li><li><a href="/myDocsv2/k8s/Kubernetes with Jenkins CICD.html" class="sidebar-link">Kubernetes with Jenkins CICD</a></li><li><a href="/myDocsv2/k8s/Prometheus+Grafana全方位监控Kubernetes集群.html" class="sidebar-link">Prometheus+Grafana全方位监控Kubernetes集群</a></li><li><a href="/myDocsv2/k8s/kompose Basic.html" class="sidebar-link">kompose Basic</a></li><li><a href="/myDocsv2/k8s/kubenetes远程调试工具.html" class="sidebar-link">kubenetes远程调试工具</a></li><li><a href="/myDocsv2/k8s/Kubernetes REST API.html" class="sidebar-link">Kubernetes REST API</a></li><li><a href="/myDocsv2/k8s/k3d.html" class="sidebar-link">k3d</a></li><li><a href="/myDocsv2/k8s/Minikube Basic.html" class="sidebar-link">Minikube Basic</a></li><li><a href="/myDocsv2/k8s/Remote access k8s.html" class="sidebar-link">Remote access k8s</a></li><li><a href="/myDocsv2/k8s/k8s 图解大全.html" class="sidebar-link">k8s 图解大全</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-73c95a87 data-v-584a622c><h3 class="title" style="display:none;" data-v-73c95a87 data-v-73c95a87></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-73c95a87 data-v-73c95a87><input type="password" value="" data-v-73c95a87> <span data-v-73c95a87>Konck! Knock!</span> <button data-v-73c95a87>OK</button></label> <div class="footer" style="display:none;" data-v-73c95a87 data-v-73c95a87><span data-v-73c95a87><i class="iconfont reco-theme" data-v-73c95a87></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-73c95a87>vuePress-theme-reco</a></span> <span data-v-73c95a87><i class="iconfont reco-copyright" data-v-73c95a87></i> <a data-v-73c95a87><span data-v-73c95a87>AGou-ops</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-584a622c><main class="page"><!----> <div class="page-title" style="display:none;"><h1>十六 网络通信</h1> <hr> <div data-v-7b2e794a><i class="iconfont reco-account" data-v-7b2e794a><span data-v-7b2e794a>AGou-ops</span></i> <!----> <i class="iconfont reco-eye" data-v-7b2e794a><span id="/myDocsv2/k8s/Quicklystart/%E5%8D%81%E5%85%AD%20%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-7b2e794a><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="十六-网络通信"><a href="#十六-网络通信" class="header-anchor">#</a> 十六 网络通信</h1> <p>K8S 的网络通信完全由 CNI 接口上的插件来实现，插件需要实现以下集中通信模型。</p> <p>目前比较流行的插件有：flannel、calico、canel、kube-router ...</p> <ul><li>如何加载插件</li></ul> <p>k8s 在启动的时候会去：/etc/cni/net.d/ 目录下寻找网络插件的配置文件，POD 在创建时候 k8s 调用这个配置文件，由插件根据这个配置文件进行创建网络。</p> <h2 id="_16-1-通信模型"><a href="#_16-1-通信模型" class="header-anchor">#</a> 16.1 通信模型</h2> <ol><li>容器间通信：同一个 POD 内多个容器间的通信，使用 lo 网卡通信</li> <li>POD间通信：POD IP 直接与 POD IP 通信</li> <li>POD 与 Service：POD IP 直接与 Cluster IP</li> <li>Service 与集群外部客户端的通信，ingress、NodePort、Loadbacer</li></ol> <h2 id="_16-2-通信模型底层"><a href="#_16-2-通信模型底层" class="header-anchor">#</a> 16.2 通信模型底层</h2> <p>无论哪一种网络插件，它们用到的底层方案都是以下几种：</p> <ol><li>虚拟网桥：brg，用纯软件实现一个虚拟网卡，一端在POD上，一端在宿主机上接入到网桥或物理接口桥上，称为隧道网络。</li> <li>多路复用：MacVLAN，基于 MAC 的方式创建 VLAN ，为每个虚拟接口配置一个独立的 MAC 地址，使得一个物理网卡承载多个容器使用，这样容器直接使用物理网卡，基于 MacVLAN 进行跨节点通信。</li> <li>硬件交换：网卡支持硬件交换，SR-IOV （单根-IO虚拟化） 方式，这种网卡支持直接在物理级别虚拟出多个接口，高性能。</li></ol> <h2 id="_16-3-k8s-名称空间"><a href="#_16-3-k8s-名称空间" class="header-anchor">#</a> 16.3 K8S 名称空间</h2> <p>K8S 名称空间与 POD 网络名称空间不在一个维度，所以即使在不同的 K8S 集群名称空间内创建的不同 POD，也可以通过网络直接通信。</p> <p>而目前应用最广的 flannel 网络插件，是不支持这种不同集群命名空间的网络隔离策略的。</p> <p>calico 支持地址分配，也支持不同集群命名空间的网络隔离策略，但是它使用较为复杂，支持 BGP 三层网络转发，性能比 flannel 强。</p> <p>也可以使用 flannel 来做网络管理，再安装 calico 仅仅做集群命名空间网路隔离策略，这种搭配方案。</p> <h2 id="_16-4-k8s网络拓扑"><a href="#_16-4-k8s网络拓扑" class="header-anchor">#</a> 16.4 K8S网络拓扑</h2> <p>所有 POD 连接到，本机 cni0 接口这个网络，cni0 接口发出的报文到达 flannel.1 这个接口，这个接口将报文封装为隧道协议，通过本机的真实的物理网卡发出。</p> <ul><li>查看本机的接口</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>: lo:                       <span class="token comment"># 本地回环</span>
<span class="token number">2</span>: ens33:                    <span class="token comment"># 主机物理网卡</span>
<span class="token number">3</span>: docker0:                  <span class="token comment"># docker 默认的桥接网络，在 k8s 中无用可以删除</span>
<span class="token number">4</span>: dummy0:                   <span class="token comment"># </span>
<span class="token number">5</span>: kube-ipvs0:               <span class="token comment"># </span>
<span class="token number">6</span>: flannel.1:                <span class="token comment"># flannel 虚拟网卡，封装隧道报文</span>
<span class="token number">7</span>: cni0:                     <span class="token comment"># 所有容器处于这个网桥</span>
<span class="token number">8</span>: veth0c014b8b@if3:         <span class="token comment"># 容器的网卡连接到 cni0</span>
<span class="token number">9</span>: veth97c048e5@if3:         <span class="token comment"># 容器的网卡连接到 cni0</span>
<span class="token number">11</span>: vethd2f0bf2b@if3:        <span class="token comment"># 容器的网卡连接到 cni0</span>
<span class="token number">12</span>: veth648a500f@if3:        <span class="token comment"># 容器的网卡连接到 cni0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>下载 bridge-utils 包使用命令 brctl show cni0 查看 cni0 接口</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bridge    name    bridge <span class="token function">id</span>           STP    enabled    interfaces
cni0              <span class="token number">8000</span>.9a6ec95f8285   no		        veth0c014b8b
                                                        veth648a500f
                                                        veth7a3f56b7
                                                        veth97c048e5
                                                        vethd2f0bf2b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_16-5-flannel"><a href="#_16-5-flannel" class="header-anchor">#</a> 16.5 flannel</h2> <p>flannel 是一个专为 kubernetes 定制的三层网络解决方案，主要用于解决容器的跨主机通信问题。</p> <h3 id="_16-5-1-flannel-工作模式"><a href="#_16-5-1-flannel-工作模式" class="header-anchor">#</a> 16.5.1 flannel 工作模式</h3> <ul><li>flannel.1 这个虚拟网卡支持多种传输模式：VxLAN、host-gw、Directrouting、udp</li></ul> <table><thead><tr><th>模式</th> <th>介绍</th></tr></thead> <tbody><tr><td>VXLAN</td> <td>使用 VxLAN 作为隧道封装报文</td></tr> <tr><td>host-gw</td> <td>不使用叠加网络，而是在主机的路由表中创建到其他主机 subnet 的路由条目，性能较好，缺陷是：所有 node 节点必须处于同一个二层网络中。</td></tr> <tr><td>DirectRouting</td> <td>当主机位于同一子网时启用直接路由，不在回退到 VxLAN。</td></tr> <tr><td>UDP</td> <td>直接使用 UDP 协议，性能差</td></tr></tbody></table> <h3 id="_16-5-2-vxlan-通信过程"><a href="#_16-5-2-vxlan-通信过程" class="header-anchor">#</a> 16.5.2 VXLAN 通信过程</h3> <p>Flannel VXLAN 实质上是一种 “覆盖网络(overlay network)” ，也就是将TCP数据包装在另一种网络包里面进行路由转发和通信，目前已经支持UDP、VxLAN、AWS VPC和GCE路由等数据转发方式。</p> <ul><li>flannel VXLAN 通信过程</li></ul> <p>在 K8S 上 POD 与 POD 是直接通过对方的 IP 地址进行通信的，POD 发出的报文经过 cni0 网桥到达 flannel ，flannel 将报文封装上一层 VxLAN 的首部，外层又被封装一层 UDP 协议的首部，发送给本机物理网卡，本机物理网卡又将 flannel 发过来的报文外层封装上 IP 首部和以太网帧首部（MAC）由网卡发出，另外一个 node 节点收到报文，内核发现是一个 VxLAN 的包，拆掉 IP 首部送给 flannel 应用程序，flannel 拆掉 VxLAN 首部并将内部的数据发送给，cni0 网桥，cni0 收到后转发给 POD。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>|                                               |                                   |
|&lt;------------------ VxLAN封装 -----------------&gt;|&lt;----------- 原始报文 -------------&gt;|
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+
|  node 网络 |  node网络  | node 网络 |  VxLan    |   POD MAC |  POD IP   |    data   |
|  帧首部MAC |   IP首部   | UDP 首部  |   首部     |    首部    |   首部    |  Payload  |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_16-5-3-flannel-部署方式"><a href="#_16-5-3-flannel-部署方式" class="header-anchor">#</a> 16.5.3 flannel 部署方式</h3> <ol><li>在 k8s 集群启动前，flannel 直接部署到节点上，作为一个守护进程运行。</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>任何一个部署了 kubelet 的节点都应该部署 flannel ，因为 kubelet 要借助 flannel 为 POD 设置网络接口
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>使用 kube-admin 直接将 k8s 自己的组件包括 flannel 运行在 k8s 之上的静态 POD。</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>必须配置为共享 <span class="token function">node</span> 节点网络名称空间的 POD，所以 flannel POD 控制器为 DaemonSet。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_16-5-4flannel-配置文件"><a href="#_16-5-4flannel-配置文件" class="header-anchor">#</a> 16.5.4flannel 配置文件</h3> <ul><li>配置文件选项含义</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
    &quot;Network&quot;: &quot;10.244.0.0/16&quot;,     // flannel 使用的 CIDR 格式的网络地址，用于为 POD 配置网络功能
	&quot;SubnetLen&quot;: 24,                // 把 Network 切分为子网供各 node 节点使用时，使用多长的掩码切分，默认为 24
	&quot;SubnetMin&quot;: &quot;10.244.10.0/24&quot;,  // 用于分配给 node 的子网起始地址，从这个网络开始分配网络
    &quot;SubnetMax&quot;: &quot;10.244.255.0/24&quot;  // 用于分配给 nide 的子网结束位置，这个是最大分配的网路  
    &quot;Backend&quot;: {                    // 指明 POD 与 POD 跨节点通信时候使用的 flannel 工作模式
        &quot;Type&quot;: &quot;vxlan&quot;,            // 工作模式
    	&quot;Directrouting&quot;: true       // 是否使用直接路由模式
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>flannel 托管到 k8s 上的配置文件，处于 kube-flannel-cfg 这个 configmap 中。</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get configmap kube-flannel-cfg -n kube-system -o json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_16-5-5-修改工作模式"><a href="#_16-5-5-修改工作模式" class="header-anchor">#</a> 16.5.5 修改工作模式</h3> <ul><li>修改 flannel 工作模式，添加 Directrouting，这个操作应该在刚刚部署完 k8s 集群时候修改，推荐修改</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl edit configmap kube-flannel-cfg -n kube-system
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;Backend&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;vxlan&quot;</span>,
    <span class="token string">&quot;Directrouting&quot;</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>查看本机路由表</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ip</span> route show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>default via <span class="token number">172.16</span>.100.254 dev ens33 proto static metric <span class="token number">100</span> 
<span class="token number">10.244</span>.1.0/24 via <span class="token number">10.244</span>.1.0 dev ens33             <span class="token comment"># 必须为 dev 物理网卡接口，否则 Directrouting 没有设置成功</span>
<span class="token number">10.244</span>.2.0/24 via <span class="token number">10.244</span>.2.0 dev ens33             <span class="token comment"># 必须为 dev 物理网卡接口，否则 Directrouting 没有设置成功</span>
<span class="token number">172.16</span>.100.0/24 dev ens33 proto kernel scope <span class="token function">link</span> src <span class="token number">172.16</span>.100.101 metric <span class="token number">100</span> 
<span class="token number">172.17</span>.0.0/16 dev docker0 proto kernel scope <span class="token function">link</span> src <span class="token number">172.17</span>.0.1 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_16-6-calico"><a href="#_16-6-calico" class="header-anchor">#</a> 16.6 Calico</h2> <p>Calico 创建和管理⼀个扁平的三层网络(不需要 overlay)，每个容器会分配一个可路由的 ip。由于通信时不需要解包和封包，网络性能损耗小，易于排查，且易于水平扩展。</p> <p>小规模部署时可以通过 bgp client 直接互联，大规模下可通过指定的 BGP route reflector 来完成，这样保证所有的数据流量都是通过 IP 路由的方式完成互联的。</p> <p>Calico 基于 iptables 还提供了丰富而灵活的网络 Policy，保证通过各个节点上的 ACLs 来提供 Workload 的多租户隔离、安全组以及其他可达性限制等功能。</p> <p>有个新的项目：canel，它集合了 flannel 和 calico 的优点。</p> <ul><li>注意</li></ul> <p>Calico 目前不支持工作在 iptables 下的 kube-proxy，下面介绍 canal 网络策略的使用</p> <h3 id="_16-6-1-安装-canal"><a href="#_16-6-1-安装-canal" class="header-anchor">#</a> 16.6.1 安装 canal</h3> <ul><li>下载清单文件，需要翻墙</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl apply -f https://docs.projectcalico.org/v3.6/getting-started/kubernetes/installation/hosted/canal/canal.yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_16-6-2-清单定义"><a href="#_16-6-2-清单定义" class="header-anchor">#</a> 16.6.2 清单定义</h3> <ul><li>清单格式，详见：kubectl explain networkpolicy</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>egress                  &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>Object<span class="token punctuation">&gt;</span>    <span class="token comment"># 出站规则的对象列表</span>
  ports                 &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>Object<span class="token punctuation">&gt;</span>    <span class="token comment"># 目标端口的对象列表</span>
    port                &lt;string<span class="token punctuation">&gt;</span>      <span class="token comment"># 数字形式或者是命名的端口</span>
    protocol                          <span class="token comment"># 协议 TCP、UDP</span>
  to                    &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>Object<span class="token punctuation">&gt;</span>    <span class="token comment"># 目标地址对象列表</span>
    ipBlock             &lt;Object<span class="token punctuation">&gt;</span>      <span class="token comment"># 一组 IP 地址</span>
      cidr	            &lt;string<span class="token punctuation">&gt;</span>      <span class="token comment"># CIDR 表示的 IP 范围</span>
      except	        &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>string<span class="token punctuation">&gt;</span>    <span class="token comment"># 排除 CIDR 中的某些地址</span>
    namespaceSelector   &lt;Object<span class="token punctuation">&gt;</span>      <span class="token comment"># 名称空间选择器</span>
    podSelector         &lt;Object<span class="token punctuation">&gt;</span>      <span class="token comment"># POD 选择器，目标地址可以也是一组 POD</span>
ingress                 &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>Object<span class="token punctuation">&gt;</span>    <span class="token comment"># 入站规则的对象列表</span>
  from                  &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>Object<span class="token punctuation">&gt;</span>    <span class="token comment"># 源地址对象列表</span>
    ipBlock             &lt;Object<span class="token punctuation">&gt;</span>      <span class="token comment"># 一组 IP 地址</span>
      cidr	            &lt;string<span class="token punctuation">&gt;</span>      <span class="token comment"># CIDR 表示的 IP 范围</span>
      except	        &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>string<span class="token punctuation">&gt;</span>    <span class="token comment"># 排除 CIDR 中的某些地址</span>
    namespaceSelector   &lt;Object<span class="token punctuation">&gt;</span>      <span class="token comment"># 名称空间选择器</span>
    podSelector         &lt;Object<span class="token punctuation">&gt;</span>      <span class="token comment"># POD 选择器，源地址也可以是一组 POD</span>
  ports                 &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>Object<span class="token punctuation">&gt;</span>    <span class="token comment"># POD 自己的端口，表示控制自己的端口是否可以被访问，的对象列表</span>
    port                              <span class="token comment"># 数字形式或者是命名的端口</span>
    protocol                          <span class="token comment"># 协议 TCP、UDP</span>
podSelector             &lt;Object<span class="token punctuation">&gt;</span>      <span class="token comment"># POD 选择器决定规则应用在哪些 POD 上</span>
policyTypes             &lt;<span class="token punctuation">[</span><span class="token punctuation">]</span>string<span class="token punctuation">&gt;</span>    <span class="token comment"># 可以是 &quot;Ingress&quot;, &quot;Egress&quot;, 或者 &quot;Ingress,Egress&quot; ，表示放行满足这些规则访问</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_16-6-3-policytypes"><a href="#_16-6-3-policytypes" class="header-anchor">#</a> 16.6.3 policyTypes</h3> <ul><li>首先定义 名称空间</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl create namespace dev
kubectl create namespace prod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>在两个命名空间分别创建一个 POD</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod1
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> dev
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ikubernetes/myapp<span class="token punctuation">:</span>v1
    
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod1
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> prod
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ikubernetes/myapp<span class="token punctuation">:</span>v1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl apply -f pod-a.yaml -n dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>拒绝所有 dev 空间的报文</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> NetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> deny<span class="token punctuation">-</span>all<span class="token punctuation">-</span>ingress
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> dev
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">podSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token comment"># {} 空的选择器表示选择全部</span>
  <span class="token key atrule">policyTypes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Ingress                  <span class="token comment"># 指明 Ingress 规则生效，匹配 Ingress 将被放行，如果没定义 Ingress 则不能匹配所有，会拒绝全部</span>
                             <span class="token comment"># policyTypes 没有 Egress 表示不控制 Egress ，默认为允许</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>在指定命名空间应用规则文件</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl apply -f deny-all-ingress.yaml -n dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看规则</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get networkpolicy -n dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看 dev 空间中的 POD 地址并访问，结果是不能访问，因为这个命名空间拒绝外部访问</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get pods -n dev -o wide
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token number">10.244</span>.1.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看 prod 空间中的 POD 地址并访问，结果可以访问，因为这个命名空间没有定义规则</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get pods -n dev -o wide
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token number">10.244</span>.2.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>允许指定网段的 POD 访问本 POD 的 80 端口</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> NetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> allow<span class="token punctuation">-</span>80<span class="token punctuation">-</span>ingress
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> dev
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">podSelector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
  <span class="token key atrule">ingress</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">from</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">ipBlock</span><span class="token punctuation">:</span>                   <span class="token comment"># 指定源地址为 IP 地址块 </span>
        <span class="token key atrule">cidr</span><span class="token punctuation">:</span> 10.244.0.0/16    <span class="token comment"># 掩码形式指出源地址 IP 地址范围</span>
        <span class="token key atrule">except</span><span class="token punctuation">:</span>                  <span class="token comment"># 排除 cidr 范围内的某个地址</span>
        <span class="token punctuation">-</span> 10.244.1.2/32
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>                   <span class="token comment"># 入栈且目标端口为 80 的则匹配</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">443</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
  <span class="token key atrule">policyTypes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Ingress                  <span class="token comment"># 指明 Ingress 规则生效，匹配 Ingress 将被放行，如果没定义 Ingress 则不能匹配所有，拒绝全部</span>
                             <span class="token comment"># policyTypes 没有 Egress 表示不控制 Egress ，默认为允许</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li>查看规则</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get networkpolicy -n dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>拒绝出栈的所有请求</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> NetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> deny<span class="token punctuation">-</span>all<span class="token punctuation">-</span>egress
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> prod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">podSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token comment"># {} 空的选择器表示选择全部</span>
  <span class="token key atrule">policyTypes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Egress                   <span class="token comment"># 指明 Egress 规则生效，匹配 Egress 将被放行，如果没定义 Egress 则不能匹配所有，拒绝全部</span>
                             <span class="token comment"># policyTypes 没有 Ingress 表示不控制 Egress ，默认为允许</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div> <footer class="page-edit" style="display:none;"><div class="edit-link"><a href="https://github.com/AGou-ops/myDocsv2/edit/master/docs/k8s/Quicklystart/十六 网络通信.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2022/06/01, 14:44:58</span></div></footer> <!----> <!----> <div class="article-list" data-v-2af88190><div class="article-title" data-v-2af88190><a href="/myDocsv2/timeline/" class="iconfont icon-shizhong" data-v-2af88190>最近更新</a></div> <div class="article-wrapper" data-v-2af88190><dl data-v-2af88190><dd data-v-2af88190>01</dd> <dt data-v-2af88190><a href="/myDocsv2/timeline/2022-03-09.html" data-v-2af88190><div data-v-2af88190>生命短暂，犹如露珠消散，人们在奔波中寻求答案。</div></a> <span data-v-2af88190>03-09</span></dt></dl><dl data-v-2af88190><dd data-v-2af88190>02</dd> <dt data-v-2af88190><a href="/myDocsv2/timeline/2018-05-06.html" data-v-2af88190><div data-v-2af88190>人生天地之间，若白驹过隙，忽然而已。</div></a> <span data-v-2af88190>05-06</span></dt></dl></div> <div data-v-2af88190><a href="/myDocsv2/timeline/" class="article-more" data-v-2af88190>更多文章 &gt;</a></div></div></main> <!----> <div class="comments-wrapper" data-v-584a622c><div class="valine-wrapper"><div id="valine"></div></div></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div><!----><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 AGou's Docs-v2
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div></div><!----><div data-v-3338c3f8><div class="DetailsOpenFlag" style="right:1rem;bottom:9rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;font-size:14px;font-weight:500;display:none;" data-v-3338c3f8>
 展开

</div></div></div></div>
    <script src="/myDocsv2/assets/js/app.792c833e.js" defer></script><script src="/myDocsv2/assets/js/5.dd197eb6.js" defer></script><script src="/myDocsv2/assets/js/1.3bd7010a.js" defer></script><script src="/myDocsv2/assets/js/2.0c757b52.js" defer></script><script src="/myDocsv2/assets/js/68.6c730d30.js" defer></script><script src="/myDocsv2/assets/js/17.ce9a229a.js" defer></script>
  </body>
</html>
