(window.webpackJsonp=window.webpackJsonp||[]).push([[196],{828:function(s,a,t){"use strict";t.r(a);var n=t(6),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"syslog-elk-日志收集"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#syslog-elk-日志收集"}},[s._v("#")]),s._v(" Syslog + ELK 日志收集")]),s._v(" "),t("h2",{attrs:{id:"配置syslog"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置syslog"}},[s._v("#")]),s._v(" 配置"),t("code",[s._v("syslog")])]),s._v(" "),t("p",[s._v("编辑"),t("code",[s._v("syslog")]),s._v("的配置文件"),t("code",[s._v("/etc/rsyslog.conf")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加如下内容")]),s._v("\n*.* @@192.168.1.6:514\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("重启"),t("code",[s._v("rsyslog")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl restart rsyslog\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"配置logstash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置logstash"}},[s._v("#")]),s._v(" 配置"),t("code",[s._v("Logstash")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /usr/local/logstash-7.7.1/config/syslog2es.conf")]),s._v("\n\ninput "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  syslog "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    type ="),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(' "system'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('syslog"\n    port ='),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" 514  \n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\noutput "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  elasticsearch "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    hosts ="),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.56.12:9200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    index ="),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(' "system'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("syslog"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("+YYYY.MM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v('"\n  '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h2",{attrs:{id:"启动相关服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动相关服务"}},[s._v("#")]),s._v(" 启动相关服务")]),s._v(" "),t("p",[s._v("启动"),t("code",[s._v("logstash")]),s._v("和"),t("code",[s._v("es")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# es")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master elasticsearch-7.7.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" esuser\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("esuser@master elasticsearch-7.7.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ bin/elasticsearch -d\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# logstash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master logstash-7.7.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# bin/logstash -f config/syslog2es.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"查看服务状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看服务状态"}},[s._v("#")]),s._v(" 查看服务状态")]),s._v(" "),t("h3",{attrs:{id:"es-状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#es-状态"}},[s._v("#")]),s._v(" ES 状态")]),s._v(" "),t("p",[s._v("在浏览器的"),t("code",[s._v("es")]),s._v("插件中的"),t("code",[s._v("browser")]),s._v("进行查看:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/elk%20stack/syslog%2Belk.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"kibana-状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana-状态"}},[s._v("#")]),s._v(" Kibana 状态")]),s._v(" "),t("p",[s._v("略.")]),s._v(" "),t("p",[s._v("参考之前的文章添加索引, 在此不再赘述.")])])}),[],!1,null,null,null);a.default=e.exports}}]);