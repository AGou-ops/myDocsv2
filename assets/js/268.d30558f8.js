(window.webpackJsonp=window.webpackJsonp||[]).push([[268],{902:function(e,t,s){"use strict";s.r(t);var a=s(6),_=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"sql-复习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sql-复习"}},[e._v("#")]),e._v(" SQL 复习")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("show grants for 'test'@'localhost';")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("revoke select on test.* from test@localhost;")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("drop database if exists test;")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("create table test7( -> a int not null comment '字段a', -> b int not null comment '字段b', -> PRIMARY KEY (a,b)")])])]),e._v(" "),s("li",[s("blockquote",[s("p",[e._v("外键注意事项:\n注意⼏点：\n• 两张表中需要建⽴外键关系的字段类型需要⼀致\n• 要设置外键的字段不能为主键\n• 被引⽤的字段需要为主键\n• 被插⼊的值在外键表必须存在，如上⾯向test6中插⼊ts5_a为2的时候报错了，原\n因：2的值在test5表中不存在")])])]),e._v(" "),s("li",[s("p",[e._v("删除表所有内容："),s("code",[e._v("delete from test11;")])])]),e._v(" "),s("li",[s("p",[e._v("修改表名 "),s("code",[e._v("alter table 表名rename [to] 新表名;")])])]),e._v(" "),s("li",[s("p",[e._v("表设置备注 "),s("code",[e._v("alter table 表名comment '备注信息';")])])]),e._v(" "),s("li",[s("p",[e._v("复制表 只复制表结构 "),s("code",[e._v("create table 表名like 被复制的表名;")])])]),e._v(" "),s("li",[s("p",[e._v("复制表结构+数据 "),s("code",[e._v("create table 表名[as] select 字段,... from 被复制的表[where 条件];")]),e._v(" 如："),s("code",[e._v("mysql> create table test13 as select * from test11;")])])]),e._v(" "),s("li",[s("p",[e._v("增加列："),s("code",[e._v("alter table test14 add column b int not null default 0 comment '字段b';")])])]),e._v(" "),s("li",[s("p",[e._v("修改列 "),s("code",[e._v("alter table 表名modify column 列名新类型[约束];")]),e._v(" 或者"),s("code",[e._v("alter table 表名change column 列名新列名新类型[约束];")]),e._v(" "),s("strong",[e._v("2种⽅式区别：modify不能修改列名，change可以修改列名")])])]),e._v(" "),s("li",[s("p",[e._v("删除列"),s("code",[e._v("alter table 表名drop column 列名;")])])]),e._v(" "),s("li",[s("p",[e._v("单表更新 语法："),s("code",[e._v("update 表名[[as] 别名] set [别名.]字段= 值,[别名.]字段= 值[where条件];")])])]),e._v(" "),s("li",[s("p",[e._v("多表更新 可以同时更新多个表中的数据  语法："),s("code",[e._v("update 表1 [[as] 别名1],表名2 [[as] 别名2] set [别名.]字段= 值,[别名.]字段= 值[where条件]")])])]),e._v(" "),s("li",[s("p",[e._v("别名的⽅式更新多个表的多个字段"),s("code",[e._v("update test1 as t1,test2 t2 set t1.a = 2 ,t1.b = 2, t2.c1 = 10 - where t1.a = t2.c1;")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("delete t1 from test1 t1 where t1.a>100;")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("delete t2,t1 from test1 t1,test2 t2 where t1.a=t2.c2;")])])]),e._v(" "),s("li",[s("p",[e._v("od函数，对两个参数取模运算。isnull函数，判断参数是否为空，若为空返回1，否则返回0。ifnull函数，2个参数，判断第⼀个参数 是否为空，如果为空返回第2个参数的值，否则返回第1个参数的值。")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("select a as '列1',b as '列2' from test1;")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("select * from test6 t where t.age in (10,15,20,30);")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("select a.id订单编号,a.price订单⾦额from t_order a where a.price>=100 order by a.price desc;")])])]),e._v(" "),s("li",[s("p",[e._v("分页查询: "),s("code",[e._v("select 列from 表名limit (page - 1) * pageSize,pageSize;")])])]),e._v(" "),s("li",[s("p",[e._v("使用"),s("code",[e._v("year")]),e._v("函数进行查询: "),s("code",[e._v("SELECT id 编号,birth 出⽣⽇期,year(birth) 出⽣年份,name 姓名 from student ORDER BY 出⽣年份 asc,id asc;")]),e._v(":")])]),e._v(" "),s("li",[s("p",[e._v("单字段分组查询: 查询用户下单数量 "),s("code",[e._v("SELECT user_id ⽤户id, COUNT(id) 下单数量 FROM t_order GROUP BY user_id;")])])]),e._v(" "),s("li",[s("p",[e._v("多字段分组查询: "),s("code",[e._v("SELECT user_id ⽤户id, the_year 年份, COUNT(id) 下单数量 FROM t_order GROUP BY user_id , the_year;")])])]),e._v(" "),s("li",[s("p",[e._v("分组查询之前的筛选: "),s("code",[e._v("SELECT user_id ⽤户id, COUNT(id) 下单数量 FROM t_order t WHERE t.the_year = 2018 GROUP BY user_id;")])])]),e._v(" "),s("li",[s("p",[e._v("如要进行分组后查询, 则需要使用"),s("code",[e._v("having")]),e._v("关键字: "),s("code",[e._v("SELECT user_id ⽤户id, COUNT(id) 下单数量 FROM t_order t WHERE t.the_year = 2018 GROUP BY user_id HAVING count(id)>=2;")])])]),e._v(" "),s("li",[s("p",[e._v("分组后排序: "),s("code",[e._v("SELECT user_id ⽤户id, max(price) 最⼤⾦额 FROM t_order t GROUP BY user_id ORDER BY 最⼤⾦额 desc;")])])]),e._v(" "),s("li",[s("p",[e._v("当同时使用 "),s("code",[e._v("where")]),e._v(", "),s("code",[e._v("group by")]),e._v(", "),s("code",[e._v("having")]),e._v(", "),s("code",[e._v("order by")]),e._v(", "),s("code",[e._v("limit")]),e._v("关键词时, 有以下先后顺序:")])])]),e._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("-- 从上到下")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("select")]),e._v(" 列 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v("\n表名\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("where")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("查询条件"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("group")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("分组表达式"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("having")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("分组过滤条件"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("order")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("排序条件"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("limit")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("offset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br")])]),s("ul",[s("li"),e._v(" "),s("li"),e._v(" "),s("li"),e._v(" "),s("li"),e._v(" "),s("li"),e._v(" "),s("li"),e._v(" "),s("li"),e._v(" "),s("li")])])}),[],!1,null,null,null);t.default=_.exports}}]);