(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{766:function(t,a,s){"use strict";s.r(a);var e=s(6),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"mysql约束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql约束"}},[t._v("#")]),t._v(" MySQL约束")]),t._v(" "),s("h2",{attrs:{id:"概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),s("ul",[s("li",[t._v("是一种限制，它是对表的行和列的数据做出约束，确保表中数据的完整性和唯一性。")])]),t._v(" "),s("h2",{attrs:{id:"使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),s("ul",[s("li",[t._v("创建表的时候，添加约束")])]),t._v(" "),s("h2",{attrs:{id:"分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[t._v("#")]),t._v(" 分类")]),t._v(" "),s("ul",[s("li",[t._v("default: 默认约束, 域完整性")]),t._v(" "),s("li",[t._v("not null: 非空约束，域完整性")]),t._v(" "),s("li",[t._v("unique: 唯一约束，实体完整性")]),t._v(" "),s("li",[t._v("primary key: 主键约束，实体完整性")]),t._v(" "),s("li",[t._v("foreign key: 外键约束，参照完整性")]),t._v(" "),s("li",[t._v("check: 检查约束（MySQL不支持），域完整性")]),t._v(" "),s("li",[t._v("auto_increment: 自增长约束")]),t._v(" "),s("li",[t._v("unsigned: 无符号约束")]),t._v(" "),s("li",[t._v("zerofill: 零填充约束")])]),t._v(" "),s("blockquote",[s("p",[t._v("数据库中有三个完整性: 域、实体、参照完整性")]),t._v(" "),s("ul",[s("li",[t._v("域(列)完整性：\n"),s("ul",[s("li",[t._v("域完整性是对数据表中字段属性的约束")])])]),t._v(" "),s("li",[t._v("实体完整性在MySQL中实现：\n"),s("ul",[s("li",[t._v("通过主键约束和候选键约束实现的")])])]),t._v(" "),s("li",[t._v("参照完整性：\n"),s("ul",[s("li",[t._v("也就是说是MySQL的外键")])])])])]),t._v(" "),s("h3",{attrs:{id:"_1-default"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-default"}},[t._v("#")]),t._v(" 1. default")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("概念")]),t._v(" "),s("ul",[s("li",[t._v("指定某列的默认值，插入数据时候，此列没有值，则用default指定的值来填充")])])]),t._v(" "),s("li",[s("p",[t._v("添加")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在创建表的时候添加： create .... default")]),t._v(" "),s("ul",[s("li",[t._v("create table t1(id int default 1, name varchar(20) default '老王');")])])]),t._v(" "),s("li",[s("p",[t._v("通过alter语句添加： alter .... "),s("strong",[t._v("modify/change")]),t._v(" ....")])]),t._v(" "),s("li",[s("p",[t._v("alter table t1 modify id int default 2;")]),t._v(" "),s("ul",[s("li",[t._v("alter table t1 change name name varchar(20) default '若尘';")])])])])]),t._v(" "),s("li",[s("p",[t._v("删除")]),t._v(" "),s("ul",[s("li",[t._v("alter .... modify/change")]),t._v(" "),s("li",[t._v("alter table t1 modify id int;")]),t._v(" "),s("li",[t._v("alter table t1 change name name varchar(20);")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-not-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-not-null"}},[t._v("#")]),t._v(" 2. not null")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("概念")]),t._v(" "),s("ul",[s("li",[t._v("指定某列的值不为空，在插入数据的时候必须非空 '' 不等于 null, 0不等于 null")])])]),t._v(" "),s("li",[s("p",[t._v("添加")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在创建表的时候添加： create .... not null")]),t._v(" "),s("ul",[s("li",[t._v("create table t2(id int not null, name varchar(20) not null);")])])]),t._v(" "),s("li",[s("p",[t._v("通过alter语句添加： alter .... modify/change ....")])]),t._v(" "),s("li",[s("p",[t._v("alter table t2 modify id int not null;")]),t._v(" "),s("ul",[s("li",[t._v("alter table t2 change name name varchar(20) not null;")])])])])]),t._v(" "),s("li",[s("p",[t._v("删除")]),t._v(" "),s("ul",[s("li",[t._v("alter .... modify/change")]),t._v(" "),s("li",[t._v("alter table t2 modify id int;")]),t._v(" "),s("li",[t._v("alter table t2 change name name varchar(20);")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-unique"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-unique"}},[t._v("#")]),t._v(" 3. unique")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("概念")]),t._v(" "),s("ul",[s("li",[t._v("指定列或者列组合不能重复，保证数据的唯一性")]),t._v(" "),s("li",[t._v("不能出现重复的值，但是可以有多个null")]),t._v(" "),s("li",[t._v("同一张表可以有多个唯一的约束")])])]),t._v(" "),s("li",[s("p",[t._v("添加唯一约束")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在创建表的时候添加： create .... unique")]),t._v(" "),s("ul",[s("li",[t._v("create table t3(id int unique, name varchar(20) not null);")])])])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" t3 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'老王'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("       \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" t3 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'老李'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- id 唯一约束，添加异常")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" t3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\nid "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constraint")]),t._v(" id_unique "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unique")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 添加复合约束")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" t3 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'老王'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" t3 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'老李'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" t3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" t3 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'老王'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("ul",[s("li",[t._v("通过alter语句添加： alter .... modify/change ....  /  alter .... add unique\n"),s("ul",[s("li",[t._v("alter table t3 modify id int unique;")]),t._v(" "),s("li",[t._v("alter table t3 add unique(name);")]),t._v(" "),s("li",[t._v("alter table t3 add constraint un_id unique(id);")])])])])])]),t._v(" "),s("h3",{attrs:{id:"_4-删除唯一约束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-删除唯一约束"}},[t._v("#")]),t._v(" 4. 删除唯一约束")]),t._v(" "),s("ul",[s("li",[t._v("alter .... drop .... index 名称")]),t._v(" "),s("li",[t._v("drop index on 表名")]),t._v(" "),s("li",[t._v("alter table t3 drop index id_unique;")]),t._v(" "),s("li",[t._v("注意：如果删除的唯一约束列具有自增长约束，则必须"),s("strong",[t._v("先删除自增长约束，再去删除唯一约束")])])]),t._v(" "),s("h3",{attrs:{id:"_5-主键约束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-主键约束"}},[t._v("#")]),t._v(" 5. 主键约束")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("概念")]),t._v(" "),s("ul",[s("li",[t._v("当前行的数据不为空并且不能重复")]),t._v(" "),s("li",[t._v("相当于：唯一约束+非空约束")])])]),t._v(" "),s("li",[s("p",[t._v("添加主键约束")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在创建表的时候添加： create .... primary key")]),t._v(" "),s("ul",[s("li",[t._v("create table t4(id int primary key, name varchar(20));")])])])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" t3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constraint")]),t._v(" id_primary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("primary")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 联合约束")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("通过alter语句添加： alter .... modify/change ....  /  alter .... add primary key ....\n"),s("ul",[s("li",[t._v("alter table t4 modify id int primary key;")]),t._v(" "),s("li",[t._v("alter table t3 add constraint un_primary primary key(id, name);")])])])])]),t._v(" "),s("li",[s("p",[t._v("删除主键")]),t._v(" "),s("ul",[s("li",[t._v("alter .... drop primary key")]),t._v(" "),s("li",[t._v("alter table t4 drop primary key;")])])]),t._v(" "),s("li",[s("p",[t._v("注意：如果删除的主键约束具有自增长约束，则必须先删除自增长约束，再去删除主键约束。")])])]),t._v(" "),s("h3",{attrs:{id:"_6-auto-increment-indentity-自增长约束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-auto-increment-indentity-自增长约束"}},[t._v("#")]),t._v(" 6. auto_increment/indentity: 自增长约束")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("概述")]),t._v(" "),s("ul",[s("li",[t._v("列的数值自动增长，列的类型只能是整数类型")]),t._v(" "),s("li",[t._v("通常给主键添加自增长约束")])])]),t._v(" "),s("li",[s("p",[t._v("添加")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在创建表的时候添加： create .... auto_increment/indentity(m,n) "),s("code",[t._v("indentity(m,n)中的m表示初始值，n表示自增长步长")])]),t._v(" "),s("ul",[s("li",[t._v("create table t5(id int primary key auto_increment, name varchar(20));")])])]),t._v(" "),s("li",[s("p",[t._v("通过alter语句添加： alter .... modify/change ....auto_increment")])]),t._v(" "),s("li",[s("p",[t._v("alter table t5 change id id int auto_increment;")])])])]),t._v(" "),s("li",[s("p",[t._v("删除自增长")]),t._v(" "),s("ul",[s("li",[t._v("alter .... modify/change...")]),t._v(" "),s("li",[t._v("alter table t5 modify id int;")])])]),t._v(" "),s("li",[s("p",[t._v("注意：")]),t._v(" "),s("ul",[s("li",[t._v("一张表只能有"),s("strong",[t._v("一个")]),t._v("自增长列，并且该列需要"),s("strong",[t._v("定义约束")]),t._v("。")])])])]),t._v(" "),s("h3",{attrs:{id:"_7-unsigned-无符号约束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-unsigned-无符号约束"}},[t._v("#")]),t._v(" 7. unsigned: 无符号约束")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("概念")]),t._v(" "),s("ul",[s("li",[t._v("指定当前列的数值为非负数")]),t._v(" "),s("li",[t._v("age tinyint 1 -128～127 unsigned 0～255")])])]),t._v(" "),s("li",[s("p",[t._v("添加")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在创建表的时候添加： create .... unsigned")]),t._v(" "),s("ul",[s("li",[t._v("create table t6(id int, age tinyint unsigned);")])])]),t._v(" "),s("li",[s("p",[t._v("通过alter语句添加： alter .... unsigned modify/change ....")])])])]),t._v(" "),s("li",[s("p",[t._v("alter table t6 change age age tinyint unsigned;")]),t._v(" "),s("ul",[s("li",[t._v("alter table t6 modify age tinyint unsigned;")])])]),t._v(" "),s("li",[s("p",[t._v("删除")]),t._v(" "),s("ul",[s("li",[t._v("alter .... modify/change ....")]),t._v(" "),s("li",[t._v("alter table t6 modify age tinyint;")]),t._v(" "),s("li",[t._v("alter table t6 change age age tinyint;")])])])]),t._v(" "),s("h3",{attrs:{id:"_8-zerofill-零填充约束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-zerofill-零填充约束"}},[t._v("#")]),t._v(" 8. zerofill: 零填充约束")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("概念")]),t._v(" "),s("ul",[s("li",[t._v("指定当前列的数值的显示格式，多余的位数使用"),s("code",[t._v("0")]),t._v("来填充，不影响当前列显示范围和实际存储的数据")]),t._v(" "),s("li",[t._v("比如："),s("code",[t._v("int(3)")]),t._v("，数据为"),s("code",[t._v("3")]),t._v("时，在命令行中显示的内容为"),s("code",[t._v("003")]),t._v("，实际存储的数据还是"),s("code",[t._v("3")])])])]),t._v(" "),s("li",[s("p",[t._v("添加")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在创建表的时候添加： create .... zerofill")]),t._v(" "),s("ul",[s("li",[t._v("create table t7(id int, age int(6) zerofill);")])])])])]),t._v(" "),s("li",[s("p",[t._v("删除")]),t._v(" "),s("ul",[s("li",[t._v("alter .... modify/change ....")]),t._v(" "),s("li",[t._v("alter table t7 modify age int;")]),t._v(" "),s("li",[t._v("alter table t7 change age age int;")])])])]),t._v(" "),s("h3",{attrs:{id:"_9-foreign-key-外键约束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-foreign-key-外键约束"}},[t._v("#")]),t._v(" 9. foreign key: 外键约束")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("通过建立外键，设置表与表之间的约束性，限制数据的录入")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("员工表(从表)                       部门表(主表)\n员工号    员工姓名  部门名称          部门号  部门名称\n1        张三      1                1         人力\n2        李四      2                2         销售\n3        王五      3\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("概述")]),t._v(" "),s("ul",[s("li",[t._v("建立表与表之间的关系，建立参照完整性，一个表可以有多个外键，每个外键必须参照另一个主键。")]),t._v(" "),s("li",[t._v("被外键约束的列，取值必须参照其主表列中的值")]),t._v(" "),s("li",[t._v("注意："),s("strong",[t._v("通常先创建主表，再创建从表")])])])]),t._v(" "),s("li",[s("p",[t._v("查看所有表的外键约束")])])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("- SELECT * FROM information_schema."),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("TABLE_CONSTRAINTS"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("where "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("table_name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<TABLE_NAME>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("添加外键约束")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" dept"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deptno "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("primary")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto_increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dname "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("loc "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 添加外键约束")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" emp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("empno "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("primary")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto_increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ename "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deptno "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constraint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("fk_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("foreign")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deptno"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("references")]),t._v(" dept"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deptno"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 使用alter add constraint ....")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("alter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" emp "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constraint")]),t._v(" fk_name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("foreign")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deptno"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("references")]),t._v(" dept"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deptno"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("ul",[s("li",[s("p",[t._v("删除外键约束")]),t._v(" "),s("ul",[s("li",[t._v("alter .... drop foreign key fk_name")]),t._v(" "),s("li",[t._v("alter table emp drop foreign key fk_name;")])])]),t._v(" "),s("li",[s("p",[t._v("注意：")]),t._v(" "),s("ul",[s("li",[t._v("在创建表时，不去明确指定外键约束的名称，系统会自动地生成一个外键的名称。")]),t._v(" "),s("li",[t._v("使用 show create table 表名 查看具体的外键名称")])])]),t._v(" "),s("li",[s("p",[t._v("设置外键中的级联关系")]),t._v(" "),s("ul",[s("li",[t._v("on delete cascade: 删除主表中的数据时，从表中的数据随之删除")]),t._v(" "),s("li",[t._v("on update cascase: 更新主表中的数据时，从表中的数据随之更新")]),t._v(" "),s("li",[t._v("on delete set null: 删除主表中的数据时，从表中的数据置空")])])]),t._v(" "),s("li",[s("p",[t._v("级联删除")]),t._v(" "),s("ul",[s("li",[t._v("create table emp(empno int promary key auto_increment, ename varchar(32) not null, deptno int,\n​    [constraint fk_name] foreign key(deptno) references dept(deptno) on delete cascade-- 添加外键约束")])])])]),t._v(" "),s("p",[t._v(");")]),t._v(" "),s("ul",[s("li",[t._v("注意：\n"),s("ul",[s("li",[t._v("插入数据时，先插入主表的数据，再插入从表的数据")]),t._v(" "),s("li",[t._v("删除数据时，先删除从表的数据，再删除主表的数据")])])])]),t._v(" "),s("h2",{attrs:{id:"数据库的设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库的设计"}},[t._v("#")]),t._v(" 数据库的设计")]),t._v(" "),s("ul",[s("li",[t._v("主键约束")]),t._v(" "),s("li",[t._v("自增长约束")]),t._v(" "),s("li",[t._v("外键约束(慎用)")]),t._v(" "),s("li",[t._v("唯一约束")]),t._v(" "),s("li",[t._v("非空约束")]),t._v(" "),s("li",[t._v("默认约束")])]),t._v(" "),s("blockquote",[s("p",[t._v("文章原文：https://segmentfault.com/a/1190000039214953")])]),t._v(" "),s("h2",{attrs:{id:"参考链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),s("ul",[s("li",[t._v("http://article.docway.net/details?id=5fd0d627f8d82b689d3200bf")])])])}),[],!1,null,null,null);a.default=n.exports}}]);