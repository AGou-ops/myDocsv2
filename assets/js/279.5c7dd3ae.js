(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{911:function(s,a,t){"use strict";t.r(a);var n=t(6),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"terraform-basic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#terraform-basic"}},[s._v("#")]),s._v(" Terraform Basic")]),s._v(" "),t("h2",{attrs:{id:"terraform-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#terraform-简介"}},[s._v("#")]),s._v(" Terraform 简介")]),s._v(" "),t("blockquote",[t("p",[s._v("Terraform(IaaC)是用于安全有效地构建，更改和版本控制基础结构的工具。 Terraform可以管理现有和流行的服务提供商以及定制的内部解> 决方案。")]),s._v(" "),t("p",[s._v("配置文件向Terraform描述了运行单个应用程序或整个数据中心所需的组件。Terraform生成执行计划，以描述达到预期状态所需执行的> 操作，然后执行该计划以构建所描述的基础结构。随着配置的更改，Terraform能够确定更改的内容并创建可以应用的增量执行计划。")]),s._v(" "),t("p",[s._v("Terraform可以管理的基础结构包括低级组件，例如计算实例，存储和网络，以及高级组件，例如DNS条目，SaaS功能等。")])]),s._v(" "),t("h2",{attrs:{id:"terraform-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#terraform-安装"}},[s._v("#")]),s._v(" Terraform 安装")]),s._v(" "),t("p",[s._v("首先从"),t("a",{attrs:{href:"https://www.terraform.io/downloads.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方站点"),t("OutboundLink")],1),s._v("下载与当前系统相同的"),t("code",[s._v("Terraform")]),s._v("版本, 解压缩, 然后放置于环境变量目录下即可.")]),s._v(" "),t("p",[t("code",[s._v("Linux")]),s._v("系统下("),t("a",{attrs:{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli?in=terraform/aws-get-started",target:"_blank",rel:"noopener noreferrer"}},[s._v("其他系统?"),t("OutboundLink")],1),s._v("):")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://releases.hashicorp.com/terraform/0.13.5/terraform_0.13.5_linux_amd64.zip\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" terraform_0.13.5_linux_amd64.zip\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" terraform_0.13.5_linux_amd64\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x terraform\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" terraform /usr/bin/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 检验安装")]),s._v("\n$ terraform --version\nTerraform v0.13.5\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为bash或者zsh添加命令行自动补全功能")]),s._v("\n$ terraform -install-autocomplete\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"terraform-with-aws"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#terraform-with-aws"}},[s._v("#")]),s._v(" Terraform with AWS")]),s._v(" "),t("p",[s._v("预先准备:")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("aws cli"),t("OutboundLink")],1),s._v("已成功安装;")]),s._v(" "),t("li",[s._v("成功获取"),t("code",[s._v("AKSK")]),s._v(";")]),s._v(" "),t("li",[s._v("aws 本地证书已成功配置;")])]),s._v(" "),t("p",[s._v("aws cli安装很简单, 在此就不再赘述.")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("AKSK")]),s._v("配置aws本地证书:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ aws configure\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会提示输入AKSK信息, 可以从 https://console.aws.amazon.com/iam/home?#security_credential 获取")]),s._v("\nAWS Access Key ID "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("****************CRUK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": AKI******HHMRQ\nAWS Secret Access Key "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("****************4K/x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": z0RR******NK0wZE37A\nDefault region name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ap-east-1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nDefault output "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("yaml"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("执行完该命令之后, 会自动在家目录(Mac/Linux/Windows)创建一个名为"),t("code",[s._v(".aws")]),s._v("的文件夹, 文件夹中包含"),t("code",[s._v("config")]),s._v("配置文件以及"),t("code",[s._v("credentials")]),s._v("证书认证文件(实际为"),t("code",[s._v("AKSK")]),s._v("明文的ini风格文件).")]),s._v(" "),t("h3",{attrs:{id:"快速开始"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快速开始"}},[s._v("#")]),s._v(" 快速开始")]),s._v(" "),t("p",[s._v("编写配置文件:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim main.tf")]),s._v("\nterraform "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  required_providers "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    aws "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hashicorp/aws"')]),s._v("\n      version "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~> 3.0"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Configure the AWS Provider")]),s._v("\nprovider "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aws"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  profile "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n  region "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"us-east-1"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nresource "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aws_instance"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"example"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  count         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行的实例数")]),s._v("\n  ami           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ami-07efac79022b86107"')]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定ami")]),s._v("\n  instance_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t2.micro"')]),s._v("            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定实例类型")]),s._v("\n  tags "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Server '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${count.index}")]),s._v('"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[s._v("初始化:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ terrform init\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("格式化和验证配置文件:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ terraform "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fmt")]),s._v("\n$ terraform validate\nSuccess"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" The configuration is valid.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("应用配置文件:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ terraform apply\n\nAn execution plan has been generated and is shown below.\nResource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# aws_instance.example will be created")]),s._v("\n  + resource "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aws_instance"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"example"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      + ami                          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ami-03657b56516ab7912"')]),s._v("\n      + arn                          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("known after apply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      + associate_public_ip_address  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("known after apply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      + availability_zone            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("known after apply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      + cpu_core_count               "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("known after apply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      + cpu_threads_per_core         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("known after apply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      + get_password_data            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yes'")]),s._v(" will be accepted to approve.\n\n  Enter a value: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确认完信息之后输入yes")]),s._v("\n\naws_instance.example: Creating"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\naws_instance.example: Still creating"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("10s elapsed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\naws_instance.example: Still creating"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("20s elapsed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\naws_instance.example: Still creating"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("30s elapsed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\naws_instance.example: Creation complete after 33s "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("i-0073fc0ea18bc948b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nApply complete"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Resources: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" added, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" changed, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" destroyed\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("p",[s._v("使用"),t("code",[s._v("terraform show")]),s._v("查看生成后的信息.")]),s._v(" "),t("h2",{attrs:{id:"将state文件存放到远程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将state文件存放到远程"}},[s._v("#")]),s._v(" 将state文件存放到远程")]),s._v(" "),t("p",[t("code",[s._v("Terraform")]),s._v("的状态文件以及所有配置文件都是存于本地的, 如果要协同工作, 则需将文件推送到远端, 可以使用"),t("code",[s._v("Github")]),s._v(", "),t("code",[s._v("GitLab")]),s._v(", "),t("code",[s._v("aws S3")]),s._v("等等, 同时, 官方也提供了一个云端平台来存储和协同工作.")]),s._v(" "),t("p",[s._v("Terraform Cloud 使用参考: https://learn.hashicorp.com/tutorials/terraform/aws-remote?in=terraform/aws-get-started")]),s._v(" "),t("p",[s._v("token生成: https://app.terraform.io/app/settings/tokens, 将生成之后的token放置于"),t("code",[s._v("~/.terraformrc")]),s._v("文件中(Windows系统为"),t("code",[s._v("%APPDATA%\\terraform.rc")]),s._v("), 文件内容如下所示:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("credentials "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app.terraform.io"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  token "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"REPLACE_ME"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("在配置文件中引用远端存储配置示例文件内容如下所示:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("terraform "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  backend "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"remote"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    organization "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AGou-ops"')]),s._v("\n\n    workspaces "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Example-Workspace"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("最后初始化即可, "),t("code",[s._v("terraform init")])]),s._v(" "),t("h2",{attrs:{id:"其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("terraform apply [--auto-approve -target <RESOURCES>]")]),s._v(": 应用.tf文件, 并自动应答yes, 指定资源名称;")]),s._v(" "),t("li",[t("code",[s._v("terraform fmt")]),s._v(": 格式化配置文件;")]),s._v(" "),t("li",[t("code",[s._v("terraform validate")]),s._v(": 检查配置文件语法是否正确;")]),s._v(" "),t("li",[t("code",[s._v("terraform show")]),s._v(": 查看生成之后的状态;")]),s._v(" "),t("li",[t("code",[s._v("terraform state list")]),s._v(": 查看状态列表;")]),s._v(" "),t("li",[t("code",[s._v("terraform state show <STATE_LIST_OUTPUT_NAME>")]),s._v(": 查看指定状态的详细信息;")]),s._v(" "),t("li",[t("code",[s._v("terraform refresh")]),s._v(": 刷新状态;")]),s._v(" "),t("li",[t("code",[s._v("terraform destroy [-target <RESOURCES>]")]),s._v(": 摧毁;")])]),s._v(" "),t("h2",{attrs:{id:"参考链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),t("ul",[t("li",[s._v("Terraform Documentation: https://www.terraform.io/docs")]),s._v(" "),t("li",[s._v("Terraform AWS: https://registry.terraform.io/providers/hashicorp/aws/latest/docs")]),s._v(" "),t("li",[s._v("Terraform Provider: https://www.terraform.io/docs/providers/index.html")])])])}),[],!1,null,null,null);a.default=r.exports}}]);