(window.webpackJsonp=window.webpackJsonp||[]).push([[330],{963:function(a,s,t){"use strict";t.r(s);var e=t(6),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"zabbix-basic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-basic"}},[a._v("#")]),a._v(" Zabbix Basic")]),a._v(" "),t("h2",{attrs:{id:"zabbix-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-简介"}},[a._v("#")]),a._v(" Zabbix 简介")]),a._v(" "),t("h3",{attrs:{id:"zabbix-组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-组成"}},[a._v("#")]),a._v(" Zabbix 组成")]),a._v(" "),t("ul",[t("li",[a._v("Zabbix 由前端、服务端、代理段、客户端、Java 监控网关几个组件组成")]),a._v(" "),t("li",[a._v("前端由 PHP 语言编写")]),a._v(" "),t("li",[a._v("服务端、代理端、客户端由 C 语言编写")]),a._v(" "),t("li",[a._v("Java 监控网关 Java 开发")])]),a._v(" "),t("h3",{attrs:{id:"zabbix-架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-架构"}},[a._v("#")]),a._v(" Zabbix 架构")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://s3.51cto.com/wyfs02/M01/6E/22/wKiom1V0VrizYCrhAAR8zzvcfTI972.jpg",alt:""}})]),a._v(" "),t("p",[a._v("详细参考：[Zabbix 详细介绍](./Zabbix 详细介绍.md)")]),a._v(" "),t("h2",{attrs:{id:"预先环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#预先环境配置"}},[a._v("#")]),a._v(" 预先环境配置")]),a._v(" "),t("p",[a._v("为了简化安装部署过程，安装之前关闭"),t("code",[a._v("SElinux")]),a._v("和"),t("code",[a._v("firewalld")]),a._v("防火墙等.")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 关闭SElinux")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"s/SELINUX=enforcing/SELINUX=disabled/"')]),a._v("  /etc/selinux/config\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 关闭firewalld/ufw防火墙")]),a._v("\nsystemctl stop firewalld\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("环境概述：")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("角色")]),a._v(" "),t("th",[a._v("主机-IP")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("zabbix-server、zabbix-agent")]),a._v(" "),t("td",[a._v("master.agou-ops.com(172.16.1.130)")])]),a._v(" "),t("tr",[t("td",[a._v("zabbix-agent")]),a._v(" "),t("td",[a._v("node01.agou-ops.com(172.16.1.129)")])])])]),a._v(" "),t("p",[a._v("将"),t("code",[a._v("zabbix-web")]),a._v("，数据库，"),t("code",[a._v("zabbix-server")]),a._v("都装在master主机之上.")]),a._v(" "),t("h2",{attrs:{id:"zabbix-server-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-server-安装"}},[a._v("#")]),a._v(" Zabbix-server 安装")]),a._v(" "),t("h3",{attrs:{id:"安装lnmp环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装lnmp环境"}},[a._v("#")]),a._v(" 安装"),t("code",[a._v("LNMP")]),a._v("环境")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y httpd mariadb-server mariadb php php-cli php-common php-devel php-pear php-gd php-mbstring php-mysql php-xml php-bcmath\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("启动服务")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl start httpd mariadb\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"安装最新版-zabbix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装最新版-zabbix"}},[a._v("#")]),a._v(" 安装最新版 Zabbix")]),a._v(" "),t("ol",[t("li",[a._v("安装 Zabbix 源")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" -Uvh https://repo.zabbix.com/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm\nyum clean all\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("安装Zabbix server，Web前端，agent等相关包")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" zabbix-server-mysql zabbix-web-mysql zabbix-web zabbix-agent zabbix-get zabbix-sender -y\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[a._v("连入"),t("code",[a._v("mysql/pgsql")]),a._v("数据库创建所需数据库")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("create database zabbix character "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" utf8 collate utf8_bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[a._v("创建zabbix账户并进行授权")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# grant all privileges on zabbix.* to zabbix@'172.16.%.%' identified by 'zabbix';")]),a._v("\ngrant all privileges on zabbix.* to zabbix@localhost identified by "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'zabbix'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nflush privileges"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[a._v("导入初始架构和数据，系统将提示您输入新创建的密码")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("zcat /usr/share/doc/zabbix-server-mysql-4.4.8/create.sql.gz "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" mysql -uzabbix -p zabbix\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者使用")]),a._v("\ngunzip /usr/share/doc/zabbix-server-mysql-4.4.8/create.sql.gz\nMariaDB "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" use zabbix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nMariaDB "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" create.sql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h2",{attrs:{id:"简单配置-zabbix-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简单配置-zabbix-server"}},[a._v("#")]),a._v(" 简单配置 Zabbix-server")]),a._v(" "),t("p",[a._v("编辑配置文件"),t("code",[a._v("/etc/zabbix/zabbix_server.conf")]),a._v("，分别找到以下内容并进行修改")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBHost")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zabbix\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBUser")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zabbix\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBPassword")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zabbix\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBSocket")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/lib/mysql/mysql.sock\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("p",[a._v("为Zabbix前端配置"),t("code",[a._v("PHP")]),a._v("，编辑配置文件"),t("code",[a._v("/etc/httpd/conf.d/zabbix.conf")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nphp_value date.timezone Asia/Shanghai\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("启动Zabbix server和agent进程，并为它们设置开机自启")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl restart zabbix-server zabbix-agent httpd\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" zabbix-server zabbix-agent httpd\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("最后，浏览器打开"),t("code",[a._v("http://YOUR_IP_ADDR/zabbix/setup.php")]),a._v("即可.")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Zabbix/zabbix-1.png",alt:""}})]),a._v(" "),t("p",[a._v("完成之后，系统会自动生成"),t("code",[a._v("/etc/zabbix/web/zabbix.conf.php")]),a._v("配置文件，此后如要修改相关信息，修改该文件即可.")]),a._v(" "),t("p",[a._v("ℹ️首次登录，使用"),t("code",[a._v("Admin")]),a._v("账户密码"),t("code",[a._v("zabbix")]),a._v("进行登录")]),a._v(" "),t("p",[a._v("登录成功界面")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/Zabbix/zabbix-2.png",alt:""}})]),a._v(" "),t("h2",{attrs:{id:"添加-zabbix-agent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加-zabbix-agent"}},[a._v("#")]),a._v(" 添加 Zabbix-agent")]),a._v(" "),t("p",[a._v("在"),t("code",[a._v("node01")]),a._v("节点上，安装"),t("code",[a._v("zabbix-agent")]),a._v("相关程序包")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" -Uvh https://repo.zabbix.com/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y zabbix-agent zabbix-sender\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("编辑配置文件"),t("code",[a._v("/etc/zabbix/zabbix_agentd.conf")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("Server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.16")]),a._v(".1.130\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("将主机添加到"),t("code",[a._v("zabbix server")]),a._v("当中去：")]),a._v(" "),t("ol",[t("li",[a._v("点击"),t("code",[a._v("配置")]),a._v("，然后点击"),t("code",[a._v("用户")]),a._v("，右上角"),t("code",[a._v("创建一个新用户")]),a._v("，填入相关信息")]),a._v(" "),t("li",[a._v("添加一个"),t("code",[a._v("监控项")])]),a._v(" "),t("li",[a._v("在监控选项卡中查看"),t("code",[a._v("最新数据")])])]),a._v(" "),t("h2",{attrs:{id:"前端web页面部分中文显示乱码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前端web页面部分中文显示乱码"}},[a._v("#")]),a._v(" 前端web页面部分中文显示乱码")]),a._v(" "),t("p",[a._v("问题原因：zabbix 前端默认使用的字体跟中文不兼容导致")]),a._v(" "),t("p",[a._v("解决方法：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" wqy-microhei-fonts\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /usr/share/fonts/wqy-microhei/wqy-microhei.ttc /usr/share/fonts/dejavu/DejaVuSans.ttf\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h2",{attrs:{id:"参考链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[a._v("#")]),a._v(" 参考链接")]),a._v(" "),t("ul",[t("li",[a._v("Zabbix 详细介绍：https://hacpai.com/article/1568722127381")]),a._v(" "),t("li",[a._v("Zabbix Installation：https://www.zabbix.com/cn/download")])])])}),[],!1,null,null,null);s.default=n.exports}}]);