(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{737:function(s,t,a){"use strict";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"amazon-eks-basic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#amazon-eks-basic"}},[s._v("#")]),s._v(" Amazon EKS Basic")]),s._v(" "),a("h2",{attrs:{id:"安装aws-cli客户端工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装aws-cli客户端工具"}},[s._v("#")]),s._v(" 安装"),a("code",[s._v("aws cli")]),s._v("客户端工具")]),s._v(" "),a("p",[s._v("参考指南: https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/cli-chap-install.html")]),s._v(" "),a("h3",{attrs:{id:"为用户生成可供使用的安全证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为用户生成可供使用的安全证书"}},[s._v("#")]),s._v(" 为用户生成可供使用的安全证书")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/others/aws%20iam-2.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"添加iam用户授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加iam用户授权"}},[s._v("#")]),s._v(" 添加"),a("code",[s._v("IAM")]),s._v("用户授权")]),s._v(" "),a("p",[s._v("可给予管理员权限(如下图所示):")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/others/aws%20iam.png",alt:""}})]),s._v(" "),a("p",[s._v("其他"),a("code",[s._v("IAM")]),s._v("管理参考官方指南: https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/introduction.html")]),s._v(" "),a("h2",{attrs:{id:"安装eksctl客户端工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装eksctl客户端工具"}},[s._v("#")]),s._v(" 安装"),a("code",[s._v("eksctl")]),s._v("客户端工具")]),s._v(" "),a("p",[a("code",[s._v("eks")]),s._v("ctl官方仓库: https://github.com/weaveworks/eksctl")]),s._v(" "),a("p",[s._v("下载合适版本和操作系统的包: https://github.com/weaveworks/eksctl/releases")]),s._v(" "),a("p",[s._v("将下载好的程序放置到环境变量包含的文件夹之中即可, "),a("code",[s._v("Linux")]),s._v(", "),a("code",[s._v("Windows")]),s._v(", "),a("code",[s._v("MacOS")]),s._v("系统都是如此.")]),s._v(" "),a("p",[s._v("配置完成之后检查是否成功安装, 打开"),a("code",[s._v("cmd 命令指示符")]),s._v("(Windows 系统):")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Administrator"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("eksctl version\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.27")]),s._v(".0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出以上版本信息则表明安装已经完成")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"部署eks集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署eks集群"}},[s._v("#")]),s._v(" 部署"),a("code",[s._v("EKS")]),s._v("集群")]),s._v(" "),a("p",[s._v("在命令行中输入以下内容以部署集群服务:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Administrator"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("eksctl create cluster --name test-cluster --version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.17")]),s._v(" --region ap-east-1 --nodegroup-name linux-nodes --node-type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t3.micro --nodes "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  eksctl version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.27")]),s._v(".0\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  using region ap-east-1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  setting availability zones to "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ap-east-1a ap-east-1c ap-east-1b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  subnets "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" ap-east-1a - public:192.168.0.0/19 private:192.168.96.0/19\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  subnets "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" ap-east-1c - public:192.168.32.0/19 private:192.168.128.0/19\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  subnets "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" ap-east-1b - public:192.168.64.0/19 private:192.168.160.0/19\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  nodegroup "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux-nodes"')]),s._v(" will use "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ami-004c6d9e8cfe1a936"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("AmazonLinux2/1.17"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  using Kubernetes version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.17")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  creating EKS cluster "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-cluste"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ap-east-1"')]),s._v(" region with un-managed nodes\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  will create "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" separate CloudFormation stacks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" cluster itself and the initial nodegroup\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you encounter any issues, check CloudFormation console or try "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eksctl utils describe-stacks --region=ap-east-1 --cluster=test-cluste'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  CloudWatch logging will not be enabled "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" cluster "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-cluste"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ap-east-1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  you can "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" it with "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eksctl utils update-cluster-logging --region=ap-east-1 --cluster=test-cluste'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  Kubernetes API endpoint access will use default of "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("publicAccess"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("privateAccess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" cluster "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-cluste"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ap-east-1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sequential tasks: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" create cluster control plane "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-cluste"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sequential sub-tasks: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" no tasks, create nodegroup "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux-nodes"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  building cluster stack "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eksctl-test-cluste-cluster"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  deploying stack "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eksctl-test-cluste-cluster"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  building nodegroup stack "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eksctl-test-cluste-nodegroup-linux-nodes"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  --nodes-min"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" was "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" automatically "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" nodegroup linux-nodes\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  --nodes-max"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" was "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" automatically "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" nodegroup linux-nodes\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  deploying stack "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eksctl-test-cluste-nodegroup-linux-nodes"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the control plane availability"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("✔"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  saved kubeconfig as "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('Administrator/.kube/config"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  no tasks\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("✔"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  all EKS cluster resources "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-cluste"')]),s._v(" have been created\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  adding identity "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"arn:aws:iam::657565858235:role/eksctl-test-cluste-nodegroup-linu-NodeInstanceRole-18M4CYW81A99T"')]),s._v(" to auth ConfigMap\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  nodegroup "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux-nodes"')]),s._v(" has "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ip-192-168-89-250.ap-east-1.compute.internal"')]),s._v(" is not ready\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" at least "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to become ready "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux-nodes"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  nodegroup "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux-nodes"')]),s._v(" has "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ip-192-168-23-105.ap-east-1.compute.internal"')]),s._v(" is ready\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ip-192-168-89-250.ap-east-1.compute.internal"')]),s._v(" is ready\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  kubectl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" should work with "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('Administrator/.kube/config"')]),s._v(", try "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubectl get nodes'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("✔"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  EKS cluster "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-cluste"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ap-east-1"')]),s._v(" region is ready\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("p",[s._v("参数说明:")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("--name")]),s._v(": 即集群的名称;.")]),s._v(" "),a("li",[a("code",[s._v("--version")]),s._v(": k8s版本;")]),s._v(" "),a("li",[a("code",[s._v("--region")]),s._v(": 创建"),a("code",[s._v("ec2")]),s._v("主机的地域;")]),s._v(" "),a("li",[a("code",[s._v("--nodegroup")]),s._v(": 节点所属组;")]),s._v(" "),a("li",[a("code",[s._v("--node-type")]),s._v(": 实例主机(node)的类型;")]),s._v(" "),a("li",[a("code",[s._v("--nodes")]),s._v(": 节点数.")])]),s._v(" "),a("p",[s._v("等待"),a("code",[s._v("Ready")]),s._v("之后, 分别登录"),a("code",[s._v("Amazon EKS")]),s._v("控制台和"),a("code",[s._v("aws")]),s._v("的"),a("code",[s._v("ec2")]),s._v("控制台, 可以发现创建好的实例:")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/others/amazon%20EKS.png",alt:"Amazon EKS"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/others/20200913163437.png",alt:"EC2 dashboard"}})]),s._v(" "),a("h3",{attrs:{id:"使用kubectl查看集群状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用kubectl查看集群状态"}},[s._v("#")]),s._v(" 使用"),a("code",[s._v("kubectl")]),s._v("查看集群状态")]),s._v(" "),a("p",[s._v("使用"),a("code",[s._v("eksctl")]),s._v("部署好集群之后, 会自动生成"),a("code",[s._v("kubeconfig")]),s._v(", 可以直接在客户机使用"),a("code",[s._v("kubectl")]),s._v("工具连接至集群:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Administrator"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("kubectl cluster-info\nKubernetes master is running at https://100AE2D3CC8AE36B32810F469B566E5B.yl4.ap-east-1.eks.amazonaws.com\nCoreDNS is running at https://100AE2D3CC8AE36B32810F469B566E5B.yl4.ap-east-1.eks.amazonaws.com/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubectl cluster-info dump'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\nC:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Administrator"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("kubectl get nodes\nNAME                                           STATUS   ROLES    AGE   VERSION\nip-192-168-23-105.ap-east-1.compute.internal   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   18m   v1.17.9-eks-4c6976\nip-192-168-89-250.ap-east-1.compute.internal   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   18m   v1.17.9-eks-4c6976\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),a("h3",{attrs:{id:"使用eksctl删除eks集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用eksctl删除eks集群"}},[s._v("#")]),s._v(" 使用"),a("code",[s._v("eksctl")]),s._v("删除"),a("code",[s._v("EKS")]),s._v("集群")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Administrator"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("eksctl delete cluster --name test-cluste\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  eksctl version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.27")]),s._v(".0\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  using region ap-east-1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  deleting EKS cluster "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-cluste"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  either account is not authorized to use Fargate or region ap-east-1 is not supported. Ignoring error\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("✔"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  kubeconfig has been updated\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  cleaning up AWS load balancers created by Kubernetes objects of Kind Service or Ingress\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" sequential tasks: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" delete nodegroup "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux-nodes"')]),s._v(", delete cluster control plane "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-cluste"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("async"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  will delete stack "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eksctl-test-cluste-nodegroup-linux-nodes"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" stack "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eksctl-test-cluste-nodegroup-linux-nodes"')]),s._v(" to get deleted\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ℹ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  will delete stack "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eksctl-test-cluste-cluster"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("✔"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  all cluster resources were deleted\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),a("ul",[a("li",[s._v("Amazon EKS Documentation: https://docs.aws.amazon.com/zh_cn/eks/index.html")])])])}),[],!1,null,null,null);t.default=e.exports}}]);