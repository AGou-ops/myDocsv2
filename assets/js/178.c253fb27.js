(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{810:function(t,s,e){"use strict";e.r(s);var a=e(6),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"istio-basic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#istio-basic"}},[t._v("#")]),t._v(" Istio Basic")]),t._v(" "),e("h2",{attrs:{id:"istio-简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#istio-简介"}},[t._v("#")]),t._v(" Istio 简介")]),t._v(" "),e("blockquote",[e("p",[t._v("Connect, secure, control, and observe services.")])]),t._v(" "),e("p",[t._v("连接、安全加固、控制和观察服务的开放平台。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("连接（Connect）：智能控制服务之间的调用流量，能够实现灰度升级、AB 测试和红黑部署等功能；")])]),t._v(" "),e("li",[e("p",[t._v("安全加固（Secure）：自动为服务之间的调用提供认证、授权和加密；")])]),t._v(" "),e("li",[e("p",[t._v("控制（Control）：应用用户定义的 policy，保证资源在消费者中公平分配；")])]),t._v(" "),e("li",[e("p",[t._v("观察（Observe）：查看服务运行期间的各种数据，比如日志、监控和 tracing，了解服务的运行情况。")])])]),t._v(" "),e("h2",{attrs:{id:"service-mesh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#service-mesh"}},[t._v("#")]),t._v(" Service Mesh")]),t._v(" "),e("p",[e("code",[t._v("Service Mesh")]),t._v('(服务网格)可以简单理解为**"分布式代理"**.')]),t._v(" "),e("p",[e("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_gif/d5TCS9b3zE1YicaDNAIeXQe05kRHruhnHp7BC9xS8Ys4Lh0F0ib4AJ0xHQTGdtQT28M441ISZec4AfugloR8VfkA/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"istio-架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#istio-架构"}},[t._v("#")]),t._v(" Istio 架构")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://istio.io/latest/docs/ops/deployment/architecture/arch.svg",alt:"Istio架构图"}})]),t._v(" "),e("h2",{attrs:{id:"istio-安装部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#istio-安装部署"}},[t._v("#")]),t._v(" Istio 安装部署")]),t._v(" "),e("h3",{attrs:{id:"使用istioctl安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用istioctl安装"}},[t._v("#")]),t._v(" 使用"),e("code",[t._v("istioctl")]),t._v("安装")]),t._v(" "),e("p",[t._v("官方详细中文安装文档: https://istio.io/latest/zh/docs/setup/install/istioctl/")]),t._v(" "),e("p",[t._v("以下只记录相关命令:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -L https://istio.io/downloadIstio "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 也可以从官方github仓库进行获取release包, https://github.com/istio/istio/releases/tag/1.7.3")]),t._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" istio-1.7.3/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出环境变量, 以便直接使用")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PWD")]),t._v("/bin:"),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加自动补全功能(需要子命令时按下TAB键激活)")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" ./tools/istioctl.bash ~ "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" ~/istioctl.bash\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装demo配置")]),t._v("\n$ istioctl manifest "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --set "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("profile")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("demo\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 为了验证是否安装成功，需要先确保以下 Kubernetes 服务正确部署，然后验证除 jaeger-agent 服务外的其他服务，是否均有正确的 CLUSTER-IP：")]),t._v("\n$ kubectl get svc -n istio-system\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 请确保关联的 Kubernetes pod 已经部署，并且 STATUS 为 Running")]),t._v("\n$ kubectl get pods -n istio-system\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载")]),t._v("\n$ istioctl manifest generate --set "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("profile")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("demo "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" kubectl delete -f -\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br")])]),e("h3",{attrs:{id:"使用helm-chart安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用helm-chart安装"}},[t._v("#")]),t._v(" 使用"),e("code",[t._v("helm chart")]),t._v("安装")]),t._v(" "),e("p",[t._v("已被启用, 推荐使用"),e("code",[t._v("istioctl")]),t._v("安装.")]),t._v(" "),e("blockquote",[e("p",[t._v("部分内容筛选自: "),e("a",{attrs:{href:"https://weixin.sogou.com/link?url=dn9a_-gY295K0Rci_xozVXfdMkSQTLW6cwJThYulHEtVjXrGTiVgS8MgskBbNKMg1jd_UAgBBtBgbuW-CnWsI1qXa8Fplpd9M2HsHPtL_uGFwcB-LoRjg8V_MfAw8Wg3k70j_V31ZLuJMytP8qR2YRnycg--9VFPkkNS1gPt1QyTqAvLDpSkyT_ezw95tL17tyKO1qlVHvGS8DMVBk6NX30KCpE-80kRTqGhvjHCpURaK6ytIf8OgoTKJs_5u3vtMjWlhLQ8AEgCYioxHkzTmA..&type=2&query=istio&token=empty&k=91&h=L",target:"_blank",rel:"noopener noreferrer"}},[t._v("Istio 是啥?一文带你彻底了解"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"参考链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),e("ul",[e("li",[t._v("Istio Documentation: https://istio.io/latest/docs/")]),t._v(" "),e("li",[t._v("Istio Arch: https://istio.io/latest/docs/ops/deployment/architecture/")]),t._v(" "),e("li",[t._v("Istio 入门: "),e("a",{attrs:{href:"https://weixin.sogou.com/link?url=dn9a_-gY295K0Rci_xozVXfdMkSQTLW6cwJThYulHEtVjXrGTiVgS8MgskBbNKMg1jd_UAgBBtBgbuW-CnWsI1qXa8Fplpd9M2HsHPtL_uGFwcB-LoRjg8V_MfAw8Wg3k70j_V31ZLuJMytP8qR2YRnycg--9VFPkkNS1gPt1QyTqAvLDpSkyT_ezw95tL17tyKO1qlVHvGS8DMVBk6NX30KCpE-80kRTqGhvjHCpURaK6ytIf8OgoTKJs_5u3vtMjWlhLQ8AEgCYioxHkzTmA..&type=2&query=istio&token=empty&k=91&h=L",target:"_blank",rel:"noopener noreferrer"}},[t._v("Istio 是啥?一文带你彻底了解"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("Istio Installation: https://istio.io/latest/zh/docs/setup/getting-started/")])])])}),[],!1,null,null,null);s.default=n.exports}}]);