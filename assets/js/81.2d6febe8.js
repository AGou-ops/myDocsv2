(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{714:function(s,a,e){"use strict";e.r(a);var t=e(6),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"ansible-basic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ansible-basic"}},[s._v("#")]),s._v(" Ansible Basic")]),s._v(" "),e("h2",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),e("p",[s._v("Ansible 是一个开源的基于 OpenSSH 的自动化配置管理工具。可以用它来配置系统、部署软件和编排更高级的 IT 任务，比如持续部署或零停机更新。Ansible 的主要目标是简单和易用，并且它还高度关注安全性和可靠性。基于这样的目标，Ansible 适用于开发人员、系统管理员、发布工程师、IT 经理，以及介于两者之间的所有人。Ansible 适合管理几乎所有的环境，从拥有少数实例的小型环境到有数千个实例的企业环境。")]),s._v(" "),e("p",[s._v("使用 Ansible 无须在被管理的机器上安装代理，所以不存在如何升级远程守护进程的问题，也不存在由于卸载了守护进程而无法管理系统的问题。")]),s._v(" "),e("p",[s._v("官方站点: https://www.ansible.com/")]),s._v(" "),e("p",[s._v("官方GitHub仓库: https://github.com/ansible/ansible")]),s._v(" "),e("p",[s._v("Ansible 架构:")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://res.cloudinary.com/practicaldev/image/fetch/s--IdLVmgo1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/skvvt051gys64k62ez0h.png",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"ansible-安装部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ansible-安装部署"}},[s._v("#")]),s._v(" Ansible 安装部署")]),s._v(" "),e("h3",{attrs:{id:"编译安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编译安装"}},[s._v("#")]),s._v(" 编译安装")]),s._v(" "),e("p",[s._v("从github仓库安装最新版的ansible:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/ansible/ansible.git\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ./ansible\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("配置环境变量:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ./hacking/env-setup\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果没有"),e("code",[s._v("pip")]),s._v(",则需要安装"),e("code",[s._v("pip")]),s._v("程序包")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" https://bootstrap.pypa.io/get-pip.py -o get-pip.py\n$ python get-pip.py --user\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("安装所需的依赖包:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ pip "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --user -r ./requirements.txt\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("使用"),e("code",[s._v("make rpm")]),s._v("制作并安装rpm包:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Uvh ./rpm-build/ansible-*.noarch.rpm\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("更新本地 ansible 仓库:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull --rebase\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"通过仓库安装-推荐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过仓库安装-推荐"}},[s._v("#")]),s._v(" 通过仓库安装(推荐)")]),s._v(" "),e("h4",{attrs:{id:"centos"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos"}},[s._v("#")]),s._v(" CentOS")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 目前epel仓库最新版本为 2.9.6")]),s._v("\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ansible -y\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("需要注意的一点的是: "),e("code",[s._v("ansible")]),s._v("属于"),e("code",[s._v("epel")]),s._v("仓库, 如果没有"),e("code",[s._v("epel")]),s._v(", 需要提前安装. "),e("code",[s._v("yum install -y epel-release")])]),s._v(" "),e("h4",{attrs:{id:"ubuntu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu"}},[s._v("#")]),s._v(" Ubuntu")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" software-properties-common\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-add-repository --yes --update ppa:ansible/ansible\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ansible\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h4",{attrs:{id:"pip"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pip"}},[s._v("#")]),s._v(" pip")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ pip "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --user ansible\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"程序环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#程序环境"}},[s._v("#")]),s._v(" 程序环境")]),s._v(" "),e("p",[s._v("常用命令行工具:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("ansible")]),s._v(" : 主程序")]),s._v(" "),e("li",[e("code",[s._v("ansible-doc")]),s._v(" : ansible 文档\n"),e("ul",[e("li",[e("code",[s._v("-l")]),s._v(": 列出所有模块")]),s._v(" "),e("li",[e("code",[s._v("<Module_Name> -s")]),s._v(": 列出指定模块的选项")])])]),s._v(" "),e("li",[e("code",[s._v("ansible-playbook")]),s._v(" : 剧本工具")])]),s._v(" "),e("p",[s._v("配置文件:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("/etc/ansible/ansible.cfg")]),s._v(": 主配置文件")]),s._v(" "),e("li",[e("code",[s._v("/etc/ansible/hosts")]),s._v(" : 主机配置文件")]),s._v(" "),e("li",[e("code",[s._v("/etc/ansible/roles")]),s._v(": 角色配置文件")])]),s._v(" "),e("h2",{attrs:{id:"参考链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),e("ul",[e("li",[s._v("Ansible Installation : https://docs.ansible.com/ansible/latest/installation_guide")]),s._v(" "),e("li",[s._v("Ansible Documentation : https://docs.ansible.com/ansible/latest/index.html")])])])}),[],!1,null,null,null);a.default=n.exports}}]);