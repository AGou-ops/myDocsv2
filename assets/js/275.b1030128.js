(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{907:function(s,t,a){"use strict";a.r(t);var e=a(6),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"split-logrotate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#split-logrotate"}},[s._v("#")]),s._v(" Split & Logrotate")]),s._v(" "),a("h2",{attrs:{id:"split"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#split"}},[s._v("#")]),s._v(" Split")]),s._v(" "),a("p",[s._v("Linux 系统自带简单日志文件分割工具。")]),s._v(" "),a("p",[s._v("常用参数列表：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("选项")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("-b")]),s._v(" "),a("td",[s._v("分割后的文档大小，单位是byte")])]),s._v(" "),a("tr",[a("td",[s._v("-C")]),s._v(" "),a("td",[s._v("分割后的文档，单行最大byte数")])]),s._v(" "),a("tr",[a("td",[s._v("-d")]),s._v(" "),a("td",[s._v("使用数字作为后缀(default: 字母)，同时使用-a length(default: 2)指定后缀长度")])]),s._v(" "),a("tr",[a("td",[s._v("-l")]),s._v(" "),a("td",[s._v("分割后文档的行数")])]),s._v(" "),a("tr",[a("td",[s._v("--verbose")]),s._v(" "),a("td",[s._v("显示输出详细信息")])])])]),s._v(" "),a("p",[s._v("示例：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("split")]),s._v(" -l --verbose "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),s._v(" split.test -d -a "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" split.log\n╰─$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("                                                    \nsplit.test     split.test008  split.test017  split.test026\nsplit.test000  split.test009  split.test018  split.test027\nsplit.test001  split.test010  split.test019  split.test028\nsplit.test002  split.test011  split.test020  split.test029\nsplit.test003  split.test012  split.test021  split.test030\nsplit.test004  split.test013  split.test022  split.test031\nsplit.test005  split.test014  split.test023  split.test032\nsplit.test006  split.test015  split.test024  split.test033\nsplit.test007  split.test016  split.test025\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"logrotate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logrotate"}},[s._v("#")]),s._v(" Logrotate")]),s._v(" "),a("h3",{attrs:{id:"简介及解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介及解决方案"}},[s._v("#")]),s._v(" 简介及解决方案")]),s._v(" "),a("p",[s._v("Logrotate，即"),a("code",[s._v("Log rotation")]),s._v("日志滚动，属于Linux系统自带工具，基于"),a("code",[s._v("crontab")]),s._v("实现时间点滚动日志，计划每天运行的脚本位于 "),a("code",[s._v("/etc/cron.daily/logrotate")]),s._v("。")]),s._v(" "),a("p",[s._v("GitHub 地址：https://github.com/logrotate/logrotate")]),s._v(" "),a("blockquote",[a("p",[s._v("logrotate 是怎么做到滚动日志时不影响程序正常的日志输出呢？logrotate 提供了两种解决方案。")]),s._v(" "),a("ol",[a("li",[s._v("create")]),s._v(" "),a("li",[s._v("copytruncate")])]),s._v(" "),a("h3",{attrs:{id:"create"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create"}},[s._v("#")]),s._v(" create")]),s._v(" "),a("p",[s._v("这也就是默认的方案，可以通过 create 命令配置文件的权限和属组设置；这个方案的思路是重命名原日志文件，创建新的日志文件。详细步骤如下：")]),s._v(" "),a("ol",[a("li",[s._v("重命名正在输出日志文件，因为重命名只修改目录以及文件的名称，而进程操作文件使用的是 inode，所以并不影响原程序继续输出日志。")]),s._v(" "),a("li",[s._v("创建新的日志文件，文件名和原日志文件一样，注意，此时只是文件名称一样，而 inode 编号不同，原程序输出的日志还是往原日志文件输出。")]),s._v(" "),a("li",[s._v("最后通过某些方式通知程序，重新打开日志文件；由于重新打开日志文件会用到文件路径而非 inode 编号，所以打开的是新的日志文件。")])]),s._v(" "),a("p",[s._v("如上也就是 logrotate 的默认操作方式，也就是 mv+create 执行完之后，通知应用重新在新文件写入即可。mv+create 成本都比较低，几乎是原子操作，如果应用支持重新打开日志文件，如 syslog, nginx, mysql 等，那么这是最好的方式。")]),s._v(" "),a("p",[s._v("不过，有些程序并不支持这种方式，压根没有提供重新打开日志的接口；而如果重启应用程序，必然会降低可用性，为此引入了如下方式。")]),s._v(" "),a("h3",{attrs:{id:"copytruncate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copytruncate"}},[s._v("#")]),s._v(" copytruncate")]),s._v(" "),a("p",[s._v("该方案是把正在输出的日志拷 (copy) 一份出来，再清空 (trucate) 原来的日志；详细步骤如下：")]),s._v(" "),a("ol",[a("li",[s._v("将当前正在输出的日志文件复制为目标文件，此时程序仍然将日志输出到原来文件中，此时，原文件名也没有变。")]),s._v(" "),a("li",[s._v("清空日志文件，原程序仍然还是输出到预案日志文件中，因为清空文件只把文件的内容删除了，而 inode 并没改变，后续日志的输出仍然写入该文件中。")])]),s._v(" "),a("p",[s._v("如上所述，对于 copytruncate 也就是先复制一份文件，然后清空原有文件。")]),s._v(" "),a("p",[s._v("通常来说，清空操作比较快，但是如果日志文件太大，那么复制就会比较耗时，从而可能导致部分日志丢失。不过这种方式不需要应用程序的支持即可。")])]),s._v(" "),a("ul",[a("li",[s._v("执行文件： "),a("code",[s._v("/usr/sbin/logrotate")])]),s._v(" "),a("li",[s._v("主配置文件: "),a("code",[s._v("/etc/logrotate.conf")])]),s._v(" "),a("li",[s._v("自定义配置文件: "),a("code",[s._v("/etc/logrotate.d/*.conf")])]),s._v(" "),a("li",[s._v("执行状态文件："),a("code",[s._v("/var/lib/logrotate/logrotate.status")])])]),s._v(" "),a("h3",{attrs:{id:"运行-logrotate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行-logrotate"}},[s._v("#")]),s._v(" 运行 logrotate")]),s._v(" "),a("p",[s._v("logrotate 命令格式及常用参数如下所示：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-dv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-f"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--force"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-s"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--state file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" config_file "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-d, --debug ：debug 模式，测试配置文件是否有错误，并不会真正执行 rorate 和 compose 操作，但是会打印出整个执行的流程，和调用的脚本等详细信息。\n-f, --force ：强制转储文件。\n-m, --mail"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("command ：压缩日志后，发送日志到指定邮箱。\n-s, --state"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("statefile ：使用指定的状态文件。\n-v, --verbose ：显示详细转储过程。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("通常使用的方法是配合"),a("code",[s._v("crontab")]),s._v("来运行：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" -e\n*/30 * * * * /usr/sbin/logrotate /etc/logrotate.d/rsyslog "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("手动调用 logrotate：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 调用 /etc/lograte.d/ 下配置的所有日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" /etc/logrotate.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要为某个特定的配置调用 logrotate")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" -d /etc/logrotate.d/log_file \t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启debug模式，不实际生成日志文件。")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"配置文件详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件详解"}},[s._v("#")]),s._v(" 配置文件详解")]),s._v(" "),a("p",[s._v("这里以系统自带的部分"),a("code",[s._v("/etc/logrotate.d/rsyslog")]),s._v("配置文件为例：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("/var/log/syslog\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\trotate "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n\tdaily\n\tmissingok\n\tnotifempty\n\tdelaycompress\n\tcompress\n\tpostrotate\n\t\t/usr/lib/rsyslog/rsyslog-rotate\n\tendscript\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("monthly")]),s._v(": 日志文件将按月轮循。其它可用值为 "),a("code",[s._v("daily")]),s._v("，"),a("code",[s._v("weekly")]),s._v(" 或者 "),a("code",[s._v("yearly")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("rotate 5")]),s._v(": 一次将存储 5 个归档日志。对于第六个归档，时间最久的归档将被删除。")]),s._v(" "),a("li",[a("code",[s._v("compress")]),s._v(": 在轮循任务完成后，已轮循的归档将使用 "),a("code",[s._v("gzip")]),s._v(" 进行压缩。")]),s._v(" "),a("li",[a("code",[s._v("delaycompress")]),s._v(": 总是与 compress 选项一起用，delaycompress 选项指示 logrotate "),a("em",[s._v("不要将最近的归档压缩")]),s._v("，压缩 将在下一次轮循周期进行。这在你或任何软件仍然需要读取最新归档时很有用。")]),s._v(" "),a("li",[a("code",[s._v("missingok")]),s._v(": 在日志轮循期间，任何错误将被忽略，例如 “文件无法找到” 之类的错误。")]),s._v(" "),a("li",[a("code",[s._v("notifempty")]),s._v(": 如果日志文件为空，轮循不会进行。")]),s._v(" "),a("li",[a("code",[s._v("create 644 root root")]),s._v(": 以指定的权限创建全新的日志文件，同时 logrotate 也会重命名原始日志文件。")]),s._v(" "),a("li",[a("code",[s._v("postrotate/endscript")]),s._v(": 在所有其它指令完成后，postrotate 和 endscript 里面指定的命令将被执行。在这种情况下，rsyslogd 进程将立即再次读取其配置并继续运行。")])]),s._v(" "),a("p",[s._v("其他常用参数：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("tabooext [+] list")]),s._v(":让 logrotate 不转储指定扩展名的文件，缺省的扩展名是.rpm-orig, .rpmsave, v, 和～")]),s._v(" "),a("li",[a("code",[s._v("missingok")]),s._v(":在日志轮循期间，任何错误将被忽略，例如 “文件无法找到” 之类的错误。")]),s._v(" "),a("li",[a("code",[s._v("size size")]),s._v(":当日志文件到达指定的大小时才转储，bytes (缺省) 及 KB (sizek) 或 MB (sizem)")]),s._v(" "),a("li",[a("code",[s._v("copytruncate")]),s._v(":用于还在打开中的日志文件，把当前日志备份并截断")]),s._v(" "),a("li",[a("code",[s._v("nocopytruncate")]),s._v(": 备份日志文件但是不截断")]),s._v(" "),a("li",[a("code",[s._v("create mode owner group")]),s._v(": 转储文件，使用指定的文件模式创建新的日志文件")]),s._v(" "),a("li",[a("code",[s._v("nocreate")]),s._v(": 不建立新的日志文件")]),s._v(" "),a("li",[a("code",[s._v("nodelaycompress")]),s._v(": 覆盖 delaycompress 选项，转储同时压缩。")]),s._v(" "),a("li",[a("code",[s._v("errors address")]),s._v(": 专储时的错误信息发送到指定的 Email 地址")]),s._v(" "),a("li",[a("code",[s._v("ifempty")]),s._v(":即使是空文件也转储，这个是 logrotate 的缺省选项。")]),s._v(" "),a("li",[a("code",[s._v("mail address")]),s._v(": 把转储的日志文件发送到指定的 E-mail 地址")]),s._v(" "),a("li",[a("code",[s._v("nomail")]),s._v(": 转储时不发送日志文件")]),s._v(" "),a("li",[a("code",[s._v("olddir directory")]),s._v(":储后的日志文件放入指定的目录，必须和当前日志文件在同一个文件系统")]),s._v(" "),a("li",[a("code",[s._v("noolddir")]),s._v(": 转储后的日志文件和当前日志文件放在同一个目录下")])]),s._v(" "),a("h3",{attrs:{id:"logrotate-日志切割轮询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logrotate-日志切割轮询"}},[s._v("#")]),s._v(" logrotate 日志切割轮询")]),s._v(" "),a("p",[s._v("由于 logrotate 是基于"),a("code",[s._v("cron")]),s._v("运行的，所以这个日志轮转的时间是由 cron 控制的，具体可以查询 cron 的配置文件 "),a("code",[s._v("/etc/anacrontab")]),s._v("，过往的老版本的文件为（"),a("code",[s._v("/etc/crontab")]),s._v("）")]),s._v(" "),a("p",[s._v("使用 crontab 来作为日志轮转的触发容器来修改 logrotate 默认执行时间：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/crontab\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切割时间为每天晚上的12点钟")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("SHELL")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/bash\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sbin:/bin:/usr/sbin:/usr/bin\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MAILTO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# run-parts")]),s._v("\n01 * * * * root run-parts /etc/cron.hourly\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" * * * root run-parts /etc/cron.daily\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" * * "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" root run-parts /etc/cron.weekly\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * * root run-parts /etc/cron.monthly\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"附-logrotate-配置文件示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附-logrotate-配置文件示例"}},[s._v("#")]),s._v(" 附：logrotate 配置文件示例")]),s._v(" "),a("ul",[a("li",[s._v("syslog")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@gop-sg-192-168-56-103 logrotate.d]# cat syslog\n/var/log/cron\n/var/log/maillog\n/var/log/messages\n/var/log/secure\n/var/log/spooler\n{\n    missingok\n    sharedscripts\n    postrotate\n\t/bin/kill -HUP `cat /var/run/syslogd.pid 2> /dev/null` 2> /dev/null || true\n    endscript\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[s._v("zabbix-agent")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@gop-sg-192-168-56-103 logrotate.d]# cat zabbix-agent\n/var/log/zabbix/zabbix_agentd.log {\n\tweekly\n\trotate 12\n\tcompress\n\tdelaycompress\n\tmissingok\n\tnotifempty\n\tcreate 0664 zabbix zabbix\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[s._v("nginx")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@gop-sg-192-168-56-103 logrotate.d]# cat nginx\n/var/log/nginx/*.log /var/log/nginx/*/*.log{\n\tdaily\n\tmissingok\n\trotate 14\n\tcompress\n\tdelaycompress\n\tnotifempty\n\tcreate 640 root adm\n\tsharedscripts\n\tpostrotate\n\t\t[ ! -f /var/run/nginx.pid ] || kill -USR1 `cat /var/run/nginx.pid`\n\tendscript\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("ul",[a("li",[s._v("influxdb")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@gop-sg-192-168-56-103 logrotate.d]# cat influxdb\n/var/log/influxdb/access.log {\n    daily\n    rotate 7\n    missingok\n    dateext\n    copytruncate\n    compress\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);