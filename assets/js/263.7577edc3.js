(window.webpackJsonp=window.webpackJsonp||[]).push([[263],{895:function(s,a,t){"use strict";t.r(a);var n=t(6),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"influxdb-telegraf-basic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#influxdb-telegraf-basic"}},[s._v("#")]),s._v(" influxDB/Telegraf basic")]),s._v(" "),t("h2",{attrs:{id:"ç®€ä»‹åŠç›¸å…³çŸ¥è¯†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç®€ä»‹åŠç›¸å…³çŸ¥è¯†"}},[s._v("#")]),s._v(" ç®€ä»‹åŠç›¸å…³çŸ¥è¯†")]),s._v(" "),t("blockquote",[t("p",[s._v("Telegraf æ˜¯ä¸€ä¸ªç”¨ Go ç¼–å†™çš„ä»£ç†ç¨‹åºï¼Œå¯æ”¶é›†ç³»ç»Ÿå’ŒæœåŠ¡çš„ç»Ÿè®¡æ•°æ®ï¼Œå¹¶å†™å…¥åˆ° InfluxDB æ•°æ®åº“ã€‚å†…å­˜å ç”¨å°ï¼Œé€šè¿‡æ’ä»¶ç³»ç»Ÿå¯è½»æ¾æ·»åŠ æ”¯æŒå…¶ä»–æœåŠ¡çš„æ‰©å±•ã€‚")]),s._v(" "),t("p",[s._v("Influxdb æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æ—¶åºã€æ—¶é—´å’ŒæŒ‡æ ‡æ•°æ®åº“ï¼Œä½¿ç”¨ Go è¯­è¨€ç¼–å†™ï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–ã€‚Influxdb æœ‰å¦‚ä¸‹ä¸‰å¤§ç‰¹æ€§ï¼š")]),s._v(" "),t("p",[s._v("â‘ ã€åŸºäºæ—¶é—´åºåˆ—ï¼Œæ”¯æŒä¸æ—¶é—´æœ‰å…³çš„ç›¸å…³å‡½æ•°ï¼ˆå¦‚æœ€å¤§ï¼Œæœ€å°ï¼Œæ±‚å’Œç­‰ï¼‰ï¼›")]),s._v(" "),t("p",[s._v("â‘¡ã€å¯åº¦é‡æ€§ï¼šä½ å¯ä»¥å®æ—¶å¯¹å¤§é‡æ•°æ®è¿›è¡Œè®¡ç®—ï¼›")]),s._v(" "),t("p",[s._v("â‘¢ã€åŸºäºäº‹ä»¶ï¼šå®ƒæ”¯æŒä»»æ„çš„äº‹ä»¶æ•°æ®ï¼›")]),s._v(" "),t("p",[t("strong",[s._v("2ã€ä¸ºä»€ä¹ˆè¦ç”¨telegrafå’Œinfluxdbï¼Ÿ")])]),s._v(" "),t("p",[s._v("â‘ ã€åœ¨æ•°æ®é‡‡é›†å’Œå¹³å°ç›‘æ§ç³»ç»Ÿä¸­ï¼ŒTelegraf å¯ä»¥é‡‡é›†å¤šç§ç»„ä»¶çš„è¿è¡Œä¿¡æ¯ï¼Œè€Œä¸éœ€è¦è‡ªå·±æ‰‹å†™è„šæœ¬å®šæ—¶é‡‡é›†ï¼Œé™ä½æ•°æ®è·å–çš„éš¾åº¦ï¼›")]),s._v(" "),t("p",[s._v("â‘¡ã€Telegraf é…ç½®ç®€å•ï¼Œåªè¦æœ‰åŸºæœ¬çš„ Linux åŸºç¡€å³å¯å¿«é€Ÿä¸Šæ‰‹ï¼›")]),s._v(" "),t("p",[s._v("â‘¢ã€Telegraf æŒ‰ç…§æ—¶é—´åºåˆ—é‡‡é›†æ•°æ®ï¼Œæ•°æ®ç»“æ„ä¸­åŒ…å«æ—¶åºä¿¡æ¯ï¼Œinfluxdbå°±æ˜¯ä¸ºæ­¤ç±»æ•°æ®è®¾è®¡è€Œæ¥ï¼Œä½¿ç”¨ Influxdb å¯ä»¥é’ˆé‡‡é›†å¾—åˆ°çš„æ•°æ®å®Œæˆå„ç§åˆ†æè®¡ç®—æ“ä½œï¼›")]),s._v(" "),t("p",[s._v("ä»¥ä¸Šæ¥æºäºï¼šhttps://www.cnblogs.com/imyalost/p/9873621.html")])]),s._v(" "),t("p",[s._v("æ—¶åºæ•°æ®åº“ä¸»è¦ç”¨äºå­˜å‚¨åŸºäºæ—¶é—´åºåˆ—çš„æŒ‡æ ‡æ•°æ®ï¼Œä¾‹å¦‚ä¸€ä¸ªWebé¡µé¢çš„PVã€UVç­‰æŒ‡æ ‡ï¼Œå°†å…¶å®šæœŸé‡‡é›†ï¼Œå¹¶æ‰“ä¸Šæ—¶é—´æˆ³ï¼Œå°±æ˜¯ä¸€ä»½åŸºäºæ—¶é—´åºåˆ—çš„æŒ‡æ ‡ã€‚æ—¶åºæ•°æ®åº“é€šå¸¸ç”¨æ¥é…åˆå‰ç«¯é¡µé¢æ¥å±•ç¤ºä¸€æ®µæ—¶é—´çš„æŒ‡æ ‡æ›²çº¿ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å¿«é€Ÿå®‰è£…ä¸å¯åŠ¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¿«é€Ÿå®‰è£…ä¸å¯åŠ¨"}},[s._v("#")]),s._v(" å¿«é€Ÿå®‰è£…ä¸å¯åŠ¨")]),s._v(" "),t("p",[s._v("å®˜æ–¹ä¸‹è½½åœ°å€ï¼š https://portal.influxdata.com/downloads/")]),s._v(" "),t("p",[s._v("å®‰è£…"),t("code",[s._v("influxDB")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -qO- https://repos.influxdata.com/influxdb.key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" gpg -- dearmor "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/apt/trusted.gpg.d/influxdb.gpg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DISTRIB_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release -si"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DISTRIB_CODENAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release -sc"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [signed-by=/etc/apt/trusted.gpg.d/influxdb.gpg] https://repos.influxdata.com/'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DISTRIB_ID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(",,")]),s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DISTRIB_CODENAME}")]),s._v(' stable"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/apt/sources.list.d/influxdb.list "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" influxdb2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("å®‰è£…"),t("code",[s._v("Telegraf")]),s._v("ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dl.influxdata.com/telegraf/releases/telegraf_1.22.1-1_amd64.deb\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dpkg -i telegraf_1.22.1-1_amd64.deb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("å¯åŠ¨æœåŠ¡ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl start influxdb\nsystemctl start telegraf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"telegrafæ”¶é›†nginxçŠ¶æ€åˆ°influxdbå¹¶ç”¨grafanaæŸ¥è¯¢å±•ç¤º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#telegrafæ”¶é›†nginxçŠ¶æ€åˆ°influxdbå¹¶ç”¨grafanaæŸ¥è¯¢å±•ç¤º"}},[s._v("#")]),s._v(" Telegrafæ”¶é›†nginxçŠ¶æ€åˆ°influxDBå¹¶ç”¨GrafanaæŸ¥è¯¢å±•ç¤º")]),s._v(" "),t("h3",{attrs:{id:"telegrafç®€å•é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#telegrafç®€å•é…ç½®"}},[s._v("#")]),s._v(" telegrafç®€å•é…ç½®")]),s._v(" "),t("p",[s._v("é…ç½®"),t("code",[s._v("Telegraf")]),s._v("(é»˜è®¤debå®‰è£…çš„ä½ç½®ä¸º"),t("code",[s._v("/etc/telegraf/telegraf.conf")]),s._v(")ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¿®æ”¹é…ç½®æ–‡ä»¶ç›¸å…³å†…å®¹ï¼Œæ²¡æœ‰è¯¥æ–‡ä»¶çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ä¸ªé»˜è®¤çš„é…ç½®æ–‡ä»¶")]),s._v("\ntelegraf --sample-config "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" telegraf.conf\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŒç›®å½•ä¸‹ä¹Ÿæœ‰ä¸ªsampleæ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶æ”¹å")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("éœ€è¦ç•¥å¾®ä¿®æ”¹çš„åœ°æ–¹ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/others/image-20220422144857745.png",alt:"image-20220422144857745"}})]),s._v(" "),t("p",[s._v("å°†"),t("code",[s._v("122")]),s._v("è¡Œå’Œ"),t("code",[s._v("129")]),s._v("è¡Œå–æ¶ˆæ³¨é‡Šï¼Œå…·ä½“ä»¥å½“å‰æ–‡ä»¶ä¸ºå‡†ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/others/image-20220422150746282.png",alt:"image-20220422150746282"}})]),s._v(" "),t("p",[s._v("å¤§æ¦‚"),t("code",[s._v("5761")]),s._v("è¡Œå’Œ"),t("code",[s._v("5763")]),s._v("è¡Œï¼Œå–æ¶ˆæ³¨é‡Š[[inputs.nginx]]ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„"),t("code",[s._v("urls")]),s._v("å¡«å†™çš„æ˜¯ä½ nginxçš„"),t("code",[s._v("nginx-status")]),s._v("é¡µé¢ï¼Œ")]),s._v(" "),t("p",[s._v("å¦‚æœä½ æ²¡æœ‰è¯¥é¡µé¢ï¼Œæˆ–è€…è¯¥æ¨¡å—æ²¡æœ‰è¢«ç¼–è¯‘è¿›nginxï¼Œå‚è€ƒè¿™ç¯‡æ–‡ç« ğŸ‘‰ğŸ»ï¼šhttps://www.tecmint.com/enable-nginx-status-page/")]),s._v(" "),t("p",[s._v("é‡å¯telegrafä½¿é…ç½®ç”Ÿæ•ˆï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl restart telegraf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"influxdbä¸­æŸ¥çœ‹æ”¶é›†åˆ°çš„æ•°æ®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#influxdbä¸­æŸ¥çœ‹æ”¶é›†åˆ°çš„æ•°æ®"}},[s._v("#")]),s._v(" influxDBä¸­æŸ¥çœ‹æ”¶é›†åˆ°çš„æ•°æ®")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@localhost:~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# influx\nConnected to http://localhost:8086 version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),s._v(".10\nInfluxDB shell version: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),s._v(".10\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" show databases\nname: databases\nname\n----\n_internal\ntelegraf\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use telegraf\nUsing database telegraf\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" show measurements\nname: measurements\nname\n----\ncpu\ndisk\ndiskio\nkernel\nmem\nnginx\nprocesses\nswap\nsystem\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" * from nginx\nname: nginx\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v("                accepts active handled "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("      port reading requests server    waiting writing\n----                ------- ------ ------- ----      ---- ------- -------- ------    ------- -------\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607510000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607520000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607530000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607540000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607550000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607560000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607570000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607580000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607590000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("        localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607600000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1650607610000000000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("       localhost "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("h3",{attrs:{id:"grafanaä¸­æŸ¥è¯¢influxdbå¹¶å±•ç¤º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grafanaä¸­æŸ¥è¯¢influxdbå¹¶å±•ç¤º"}},[s._v("#")]),s._v(" Grafanaä¸­æŸ¥è¯¢influxDBå¹¶å±•ç¤º")]),s._v(" "),t("p",[s._v("æ·»åŠ "),t("code",[s._v("influxDB")]),s._v("æ•°æ®æºå¾ˆç®€å•ï¼Œå¡«å¥½"),t("code",[s._v("URL")]),s._v("å’Œ"),t("code",[s._v("Database")]),s._v("ä¸º"),t("code",[s._v("telegraf")]),s._v("å°±å¯ä»¥äº†ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†èµ˜è¿°.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/others/image-20220422151431964.png",alt:"image-20220422151431964"}})]),s._v(" "),t("p",[s._v("å…¶ä»–é«˜çº§æ“ä½œè‡ªè¡Œæ‘¸ç´¢ã€‚ã€‚ã€‚ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/others/image-20220422151521757.png",alt:"image-20220422151521757"}})]),s._v(" "),t("h2",{attrs:{id:"é™„å½•-influxdb-åŸºæœ¬æ“ä½œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™„å½•-influxdb-åŸºæœ¬æ“ä½œ"}},[s._v("#")]),s._v(" é™„å½•ï¼šinfluxdb åŸºæœ¬æ“ä½œ")]),s._v(" "),t("p",[s._v("âš ï¸ "),t("code",[s._v("influxdb")]),s._v("çš„æœ¬åœ°å®¢æˆ·ç«¯cliå·¥å…·åç§°å«åšï¼š"),t("code",[s._v("influx")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ›å»ºæ•°æ®åº“")]),s._v("\ncreate database "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db_name"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ®åº“")]),s._v("\nshow databases\n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ é™¤æ•°æ®åº“")]),s._v("\ndrop database "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db_name"')]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ä½¿ç”¨æ•°æ®åº“")]),s._v("\nuse db_name\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ˜¾ç¤ºè¯¥æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨")]),s._v("\nshow measurements\n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ›å»ºè¡¨ï¼Œç›´æ¥åœ¨æ’å…¥æ•°æ®çš„æ—¶å€™æŒ‡å®šè¡¨å")]),s._v("\ninsert test,host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,monitor_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ é™¤è¡¨")]),s._v("\ndrop measurement "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"measurement_name"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("ç»å…¸CRUDæ“ä½œï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¢")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use metrics\nUsing database metrics\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" insert test,host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,monitor_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -i -XPOST "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://127.0.0.1:8086/write?db=metrics'")]),s._v(" -- data-binary "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test,host=127.0.0.1,monitor_name=test count=1'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" * from "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" order by "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" desc\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -G "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://localhost:8086/query?pretty=true'")]),s._v(" -- data-urlencode "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db=metrics"')]),s._v(" -- data-urlencode "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"q=select * from test order by time desc"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ”¹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" insert test,host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,monitor_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ ")]),s._v("\ndrop measurement "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"measurement_name"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("å¯¼å…¥å¯¼å‡ºæ•°æ®ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("influx_inspect "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" -datadir "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/influxdb/data"')]),s._v(" -waldir "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/influxdb/wal"')]),s._v(" -out "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geoip2influx.bak"')]),s._v(" -database "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geoip2influx"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# -start "2021-09-10T00:00:00Z"')]),s._v("\nå…¶ä¸­ï¼š\n  datadir: influxdbçš„æ•°æ®å­˜æ”¾ä½ç½®\n  waldir: influxdbçš„walç›®å½•\n  out: è¾“å‡ºæ–‡ä»¶\n  database: å¯¼å‡ºçš„dbåç§°\n  start: ä»ä»€ä¹ˆæ—¶é—´å¯¼å‡º\n  \n  \n  \ninflux -import -path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/agou-ops/geoip2influx.bak -precision"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ns\n\nå…¶ä¸­ï¼š\n  import: æ ‡è¯†å¯¼å…¥\n  path: å¯¼å…¥æ–‡ä»¶\n  precision: å¯¼å…¥çš„æ•°æ®æ—¶é—´ç²¾åº¦\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("ç”¨æˆ·ç®¡ç†ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ˜¾ç¤ºç”¨æˆ·")]),s._v("\nshow "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ›å»ºç”¨æˆ·")]),s._v("\ncreate user "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v(" with password "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ›å»ºç®¡ç†å‘˜æƒé™ç”¨æˆ·")]),s._v("\ncreate user "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v(" with password "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),s._v(" with all privileges\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ é™¤ç”¨æˆ·")]),s._v("\ndrop user "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("å…¶ä»–ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" FIELD "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEYS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨çš„å­—æ®µ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" series "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" pay "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹keyæ•°æ®")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" TAG "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEYS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pay"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹keyä¸­tag keyå€¼")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" TAG "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pay"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"merId"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹keyä¸­tag æŒ‡å®škeyå€¼å¯¹åº”çš„å€¼")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" TAG "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cpu "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"region"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" service "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redis'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" SERIES "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("measurement_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("measurement_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tag_key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<tag_value>'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åˆ é™¤key")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" CONTINUOUS QUERIES   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹è¿ç»­æ‰§è¡Œå‘½ä»¤")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" QUERIES  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹æœ€åæ‰§è¡Œå‘½ä»¤")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KILL")]),s._v(" QUERY "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("qid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ç»“æŸå‘½ä»¤")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" RETENTION POLICIES "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" mydb  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹ä¿ç•™æ•°æ®")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--  æŸ¥è¯¢æ•°æ®")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥è¯¢å½“å‰æ•°æ®åº“ä¸‹æ‰€æœ‰è¡¨çš„ç¬¬ä¸€è¡Œè®°å½•")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" pay  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("  db_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"POLICIES name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("measurement_name "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŒ‡å®šæŸ¥è¯¢æ•°æ®åº“ä¸‹æ•°æ®ä¿ç•™ä¸­çš„è¡¨æ•°æ® POLICIES nameæ•°æ®ä¿ç•™")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--  åˆ é™¤æ•°æ®")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åˆ é™¤è¡¨æ‰€æœ‰æ•°æ®ï¼Œåˆ™è¡¨å°±ä¸å­˜åœ¨äº†")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" MEASUREMENT "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åˆ é™¤è¡¨ï¼ˆæ³¨æ„ä¼šæŠŠæ•°æ®ä¿ç•™åˆ é™¤ä½¿ç”¨deleteä¸ä¼šï¼‰")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cpu\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cpu "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2000-01-01T00:00:00Z'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2000-01-01T00:00:00Z'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" â€œtestDBâ€ "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åˆ é™¤æ•°æ®åº“")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" RETENTION POLICY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dbbak"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" mydb "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åˆ é™¤ä¿ç•™æ•°æ®ä¸ºdbbakæ•°æ®")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" SERIES "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" pay "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" tag_key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åˆ é™¤keyä¸­çš„tag")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" SHARDS  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹æ•°æ®å­˜å‚¨æ–‡ä»¶")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" SHARD "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" SHARD GROUPS\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" SUBSCRIPTIONS\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("h2",{attrs:{id:"å‚è€ƒé“¾æ¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒé“¾æ¥"}},[s._v("#")]),s._v(" å‚è€ƒé“¾æ¥")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("æ•°æ®é‡‡é›†å·¥å…·Telegrafï¼šç®€ä»‹åŠå®‰è£…ï¼šhttps://www.cnblogs.com/imyalost/p/9873621.html")])]),s._v(" "),t("li",[t("p",[s._v("InfluxDB documentationï¼šhttps://docs.influxdata.com/influxdb/v2.2/install/?t=Linux")])]),s._v(" "),t("li",[t("p",[s._v("influxdbåŸºæœ¬æ“ä½œï¼šhttps://blog.csdn.net/u010185262/article/details/53158786")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);