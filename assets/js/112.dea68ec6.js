(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{745:function(s,a,t){"use strict";t.r(a);var n=t(6),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mongodb-数据备份和还原"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-数据备份和还原"}},[s._v("#")]),s._v(" MongoDB 数据备份和还原")]),s._v(" "),t("p",[s._v("MongoDB数据备份（恢复）的几种方式或工具：")]),s._v(" "),t("ul",[t("li",[s._v("mongoexport、mongoimport：备份导出格式为"),t("code",[s._v("JSON")]),s._v("格式或者"),t("code",[s._v("CSV")]),s._v("格式；")]),s._v(" "),t("li",[s._v("mongodump、mongorestore：备份导出格式为"),t("code",[s._v("BSON")]),s._v("格式；")])]),s._v(" "),t("blockquote",[t("p",[s._v("JSON可读性强但体积较大，BSON则是二进制文件，体积小但对人类几乎没有可读性。")])]),s._v(" "),t("ul",[t("li",[s._v("Back Up with Filesystem Snapshots")]),s._v(" "),t("li",[s._v("Back Up with cp or rsync")])]),s._v(" "),t("h2",{attrs:{id:"mongodbexport、mongoimport"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodbexport、mongoimport"}},[s._v("#")]),s._v(" mongodbexport、mongoimport")]),s._v(" "),t("h3",{attrs:{id:"mongodbexport"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodbexport"}},[s._v("#")]),s._v(" mongodbexport")]),s._v(" "),t("p",[s._v("Mongodb中的"),t("code",[s._v("mongoexport")]),s._v("工具可以把一个collection导出成JSON格式或CSV格式的文件。\n可以通过参数指定导出的数据项，也可以根据指定的条件导出数据。\n（1）版本差异较大\n（2）异构平台数据迁移")]),s._v(" "),t("p",[s._v("mongoexport具体用法如下所示：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("$ mongoexport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("help")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 参数说明：\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明数据库宿主机的IP\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明数据库的用户名\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明数据库的密码\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明数据库的名字\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明collection的名字\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明要导出那些列\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明到要导出的文件名\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("q"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明导出数据的过滤条件\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("authenticationDatabase admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("备份app库下的vast集合\n创建集合并插入数据：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("admin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use app\nswitched to db app\n\napp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("insert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"date"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("new Date"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmongoexport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d app "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c vast  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mongodb"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("注：备份文件的名字可以自定义，默认导出了JSON格式的数据。")]),s._v(" "),t("p",[s._v("如果我们需要导出CSV格式的数据，则需要使用—-type=csv参数：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("$ mongoexport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d app "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c vast "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("csv "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("date  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mongodb"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("csv\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"mongoimport"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongoimport"}},[s._v("#")]),s._v(" mongoimport")]),s._v(" "),t("p",[s._v("Mongodb中的"),t("code",[s._v("mongoimport")]),s._v("工具可以把一个特定格式文件中的内容导入到指定的collection中。该工具可以导入JSON格式数据，也可以导入CSV格式数据。具体使用如下所示：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("$ mongoimport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("help")]),s._v("\n× 参数说明：\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明数据库宿主机的IP\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明数据库的用户名\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明数据库的密码\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明数据库的名字\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明collection的名字\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明要导入那些列\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("numInsertionWorkers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("number"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  number of insert operations to run concurrently                                                  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("defaults to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("并行\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("示例：先删除vast中的数据，并验证")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("remove"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后再导入上面导出的vasts.dat文件中的内容")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("mongoimport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d app  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c vast    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mongodb"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面演示的是导入JSON格式的文件中的内容，如果要导入CSV格式文件中的内容，则需要通过–type参数指定导入格式，具体如下所示：\n先删除数据")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("app"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("remove"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("再导入之前导出的vast.csv文件\n错误的恢复")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("mongoimport  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d app  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c vast "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("csv "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("date  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mongodb"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("csv\n或\nmongoimport  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d app  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c vast "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("csv "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("headerline "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mongodb"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("csv\n\n提示："),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("headerline"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("指明第一行是列名，不需要导入。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"mongodump、mongorestore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodump、mongorestore"}},[s._v("#")]),s._v(" mongodump、mongorestore")]),s._v(" "),t("p",[s._v("mongodump能够在Mongodb运行时进行备份，它的工作原理是对运行的Mongodb做查询，然后将所有查到的文档写入磁盘。但是存在的问题时使用mongodump产生的备份不一定是数据库的实时快照，如果我们在备份时对数据库进行了写入操作，则备份出来的文件可能不完全和Mongodb实时数据相等。另外在备份时可能会对其它客户端性能产生不利的影响。")]),s._v(" "),t("h3",{attrs:{id:"mongodump"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodump"}},[s._v("#")]),s._v(" mongodump")]),s._v(" "),t("p",[s._v("命令参数：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("mongodump "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("host "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定备份的主机ip和端口号，默认值localhost:27017")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定端口号 默认27017")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定用户名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("authenticationDatabase "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dbname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定认证的数据库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("authenticationMechanism "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定认证的算法 ，默认值 SCRAM-SHA-1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("db "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("database"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("database"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定备份的数据库，未指定的话，备份所有的数据库，但不包含local库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("collection "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("collection"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("collection"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定备份的集合，未指定则备份指定库中的所有集合。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("query "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("json"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("q "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("json"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定 json 作为查询条件。来备份我们过滤后的数据。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("queryFile "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定 json 文档路径，以该文档的内容作为查询条件，来备份我们过滤后的数据。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("quit "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过抑制 MongoDB的复制，连接等活动，来实现备份。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gzip  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启压缩，3.2版本后可以使用，输出为文件的话会带有后缀.gz")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("out "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出的目录路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("repir "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修复数据时使用 下面有详细介绍")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("oplog "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mongodump 会将 mongodump 执行期间的 oplog 日志 输出到文件 oplog.bson，这就意味着从备份开始到备份结束的数据操作我们都可以记录下来。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("archive "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出到单个存档文件或者是直接输出。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dumpDbUsersAndRoles "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只有在 使用 --db 时才适用，备份数据库的包含的用户和角色。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("excludeCollection string "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 排除指定的集合，如果要排除多个，使用多个--excludeCollection ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("numParallelCollections "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("j "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并行导出的集合数，默认为4")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("基础使用：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全库备份")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /mongodb/backup\n$ mongodump --host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test.agou-ops.top  --port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" -o /mongodb/backup\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份test库")]),s._v("\n$ mongodump  --port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" -o /mongodb/backup/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份world库下的city集合")]),s._v("\n$ mongodump  --port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" -d world -c city -o /mongodb/backup/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩备份")]),s._v("\n$ mongodump  --port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" -d app -o -c vast /mongodb/backup/ --gzip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"mongorestore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongorestore"}},[s._v("#")]),s._v(" mongorestore")]),s._v(" "),t("p",[s._v("命令格式：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mongorestore "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("directory or "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" to restore"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  \n--help "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看帮助")]),s._v("\n--quiet "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过抑制 MongoDB的复制，连接等活动，来实现数据恢复。")]),s._v("\n\n--host "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(":port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(", -h "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(":port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定恢复的主机ip和端口号，默认值localhost:27017")]),s._v("\n--port "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定端口号 默认27017")]),s._v("\n\n--username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(", -u "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定用户名")]),s._v("\n--password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(", -p "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定密码")]),s._v("\n--authenticationDatabase "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dbname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定认证的数据库")]),s._v("\n--authenticationMechanism "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定认证的算法 ，默认值 SCRAM-SHA-1")]),s._v("\n--objcheck "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启验证，验证还原操作，确保没有无效的文档插入数据库。会有较小的性能影响")]),s._v("\n--oplogReplay "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复备份数据并将 mongodump 执行期间的操作(记录在导出的日志)恢复。")]),s._v("\n--oplogLimit  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定恢复")]),s._v("\n--oplogFile "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定 Oplog 路径")]),s._v("\n--keepIndexVersion "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阻止mongorestore在还原过程中将索引升级到最新版本。")]),s._v("\n--restoreDbUsersAndRoles "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 还原指定的数据库用户和角色。")]),s._v("\n--maintainInsertionOrder "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认值为False,如果为 True,mongorestore 将按照输入源的文档顺序插入，否则是 随机执行插入。")]),s._v("\n--numParallelCollections int, -j int "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定并行恢复的集合数。")]),s._v("\n--numInsertionWorkersPerCollection int "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认值为 1，指定每个集合恢复的并发数，大数据量导入增加该值可提高 恢复速度。")]),s._v("\n--gzip "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从压缩文档中 恢复。")]),s._v("\n--archive "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从归档文件中恢复。")]),s._v("\n--dir "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定还原数据储存目录。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[s._v("基础使用：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复app1库")]),s._v("\n$ mongorestore --host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test.agou-ops.top  --port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" -d app1  /mongodb/backup/app/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复test库下的vast集合")]),s._v("\n$ mongorestore  --port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" -d app2 -c vast /mongodb/backup/app/vast.bson\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# drop表示恢复的时候把之前的集合drop掉")]),s._v("\n$ mongorestore  --port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28018")]),s._v(" -d app -c vast --drop /mongodb/backup/app/vast.bson\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("blockquote",[t("p",[s._v("⚠️注意：")]),s._v(" "),t("p",[s._v("1、如果要恢复的表已经存在，可以添加"),t("code",[s._v("--drop")]),s._v(" ，自动删除原表\n2、如果有用户验证，需要使用root或者需要备份的对象有权限的用户才可以")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 而且要添加对用户的验证库   --authenticationDatabase")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("proot123 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("authenticationDatabase admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("h2",{attrs:{id:"直接拷贝或快照数据文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#直接拷贝或快照数据文件"}},[s._v("#")]),s._v(" 直接拷贝或快照数据文件")]),s._v(" "),t("p",[s._v("这个备份数据库最最简单的方案，你可以将 "),t("code",[s._v("data/")]),s._v(" 里的所有文件一并复制到任意安全的地方，在复制之前应先停止对数据库的写入操作，以保证数据一致性。使用 "),t("code",[s._v("db.fsyncLock()")]),s._v(" 命令停止写入操作。")]),s._v(" "),t("h3",{attrs:{id:"拷贝数据文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拷贝数据文件"}},[s._v("#")]),s._v(" 拷贝数据文件")]),s._v(" "),t("p",[s._v("直接拷贝文件系统中的数据文件。")]),s._v(" "),t("p",[s._v("⚠️需要特别注意的一点是：备份复制产生的底层数据"),t("strong",[s._v("不支持时间点恢复副本集和难以管理对于较大的分片集群")]),s._v("(sharded-cluster)。此外,这些备份更大，因为它们包括索引和复制底层存储填充和碎片。相比之下，mongodump创建占空间更小的备份。")]),s._v(" "),t("p",[s._v("因此不推荐使用该备份方式。")]),s._v(" "),t("h3",{attrs:{id:"使用系统快照备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用系统快照备份"}},[s._v("#")]),s._v(" 使用系统快照备份")]),s._v(" "),t("p",[s._v("参考： https://docs.mongodb.com/manual/tutorial/backup-with-filesystem-snapshots/")]),s._v(" "),t("h2",{attrs:{id:"附录-定期备份脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附录-定期备份脚本"}},[s._v("#")]),s._v(" 附录：定期备份脚本")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#--------------------------------------------")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mongodb定时备份脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#--------------------------------------------")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#! /bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令执行路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MONGOD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/mongodump\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OUT_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/backup/mongo/mongod_bak_tmp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩后的备份存放路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TAR_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/backup/mongo/mongod_bak_list\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩时间为当前系统时间/删除时间为七天前")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TAR_DATE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%F"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEL_DATE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%F -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-7 day"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ip:port\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("******\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_AUTHSOURCE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_USERNAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("******\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("******\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OUT_DIR}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OUT_DIR}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${TAR_DIR}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${TAR_DIR}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TAR_BAK")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mongo_bak_'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${TAR_DATE}")]),s._v('.tar.gz"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OUT_DIR}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OUT_DIR}")]),s._v("/*\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${MONGOD}")]),s._v(" -h "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DB_HOST}")]),s._v(" -u "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DB_USERNAME}")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DB_PASSWORD}")]),s._v(" --authenticationDatabase "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DB_AUTHSOURCE}")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DB_NAME}")]),s._v(" -o "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OUT_DIR}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩归档")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zcvPf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${TAR_DIR}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${TAR_BAK}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OUT_DIR}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清除历史归档(七天前)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("TAR_DIR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -maxdepth "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" -type d -o -type l "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" -L "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" -maxdepth "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -type f "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DEL_DATE}")]),s._v('*"')]),s._v(" -a -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.tar.gz"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -exec "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("crontab_reload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"30 0 * * * '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SCRIPT_DIR}")]),s._v('/auto/crontab/mongo_back.sh"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /var/spool/cron/root\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启crontab")]),s._v("\n    /sbin/service crond restart\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" crond status\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get current crontab"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" -l\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"crontab reload done"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br")])]),t("h2",{attrs:{id:"参考链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),t("ul",[t("li",[s._v("MongoDB database-tools: https://docs.mongodb.com/database-tools/")]),s._v(" "),t("li",[s._v("MongoDB backups documentation: https://docs.mongodb.com/manual/core/backups/")])])])}),[],!1,null,null,null);a.default=r.exports}}]);