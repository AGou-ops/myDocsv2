(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{722:function(s,t,a){"use strict";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"gitlab-basic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-basic"}},[s._v("#")]),s._v(" GitLab Basic")]),s._v(" "),a("h2",{attrs:{id:"gitlab-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-简介"}},[s._v("#")]),s._v(" GitLab 简介")]),s._v(" "),a("p",[a("strong",[s._v("GitLab")]),s._v(" 是由 GitLab Inc.开发，一款基于 "),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Git",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git"),a("OutboundLink")],1),s._v(" 的完全集成的软件开发平台（fully "),a("a",{attrs:{href:"https://zh.wikipedia.org/w/index.php?title=%E9%9B%86%E6%88%90%E8%BB%9F%E9%AB%94&action=edit&redlink=1",target:"_blank",rel:"noopener noreferrer"}},[s._v("集成软件"),a("OutboundLink")],1),s._v(" development platform）。["),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/GitLab#cite_note-5",target:"_blank",rel:"noopener noreferrer"}},[s._v("5]"),a("OutboundLink")],1),s._v("["),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/GitLab#cite_note-6",target:"_blank",rel:"noopener noreferrer"}},[s._v("6]"),a("OutboundLink")],1),s._v(" 另外，GitLab 且具有"),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Wiki",target:"_blank",rel:"noopener noreferrer"}},[s._v("wiki"),a("OutboundLink")],1),s._v("以及在线编辑、"),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E4%BA%8B%E5%8A%A1%E8%B7%9F%E8%B8%AA%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F",target:"_blank",rel:"noopener noreferrer"}},[s._v("issue跟踪"),a("OutboundLink")],1),s._v("功能、CI/CD 等功能")]),s._v(" "),a("p",[s._v("详情参考：https://zh.wikipedia.org/wiki/GitLab")]),s._v(" "),a("h2",{attrs:{id:"installing-gitlab-via-package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-gitlab-via-package"}},[s._v("#")]),s._v(" Installing GitLab via Package")]),s._v(" "),a("p",[s._v("官方所提供的安装步骤（"),a("code",[s._v("GitLab EE")]),s._v("版本）：https://about.gitlab.com/install/#centos-7")]),s._v(" "),a("p",[s._v("懒人安装方法（通过rpm包安装，"),a("code",[s._v("GitLab CE")]),s._v("版本）：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装所需依赖")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" policycoreutils-python openssh-server postfix\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载CE包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-13.1.4-ce.0.el7.x86_64.rpm\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gitlab-ce-13.1.4-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("编辑"),a("code",[s._v("gitlab")]),s._v("配置文件"),a("code",[s._v("/etc/gitlab/gitlab.rb")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 大概在29行,将url改为本机地址,当然在这里你可以直接填写你的域名")]),s._v("\nexternal_url "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://172.16.1.131'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 时区")]),s._v("\ngitlab_rails"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'time_zone'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Asia/Shanghai'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh拉取端口")]),s._v("\ngitlab_rails"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gitlab_shell_ssh_port'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10222")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并添加以下内容")]),s._v("\nletsencrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("启动相关服务：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl start postfix\nsystemctl start sshd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("初始化"),a("code",[s._v("GitLab")]),s._v("服务:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("gitlab-ctl reconfigure\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("默认GitLab 是安装到"),a("code",[s._v("/opt/gitlab")]),s._v("目录，配置文件在"),a("code",[s._v("/etc/gitlab/")]),s._v("下.")]),s._v(" "),a("p",[s._v("安装完成之后, 打开浏览器进行访问即可:")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/CI%26CD/gitlab.png",alt:""}})]),s._v(" "),a("p",[s._v("⚠️默认用户名为"),a("code",[s._v("root")]),s._v(", 密码首次使用"),a("code",[s._v("GitLab")]),s._v("时会提示设置.")]),s._v(" "),a("blockquote",[a("p",[s._v("GitLab EE 与 CE 版本比较：https://about.gitlab.com/features/#compare")])]),s._v(" "),a("h2",{attrs:{id:"installing-gitlab-with-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-gitlab-with-docker"}},[s._v("#")]),s._v(" Installing GitLab with Docker")]),s._v(" "),a("p",[s._v("GitLab 仓库镜像：https://hub.docker.com/r/gitlab/gitlab-ce/")]),s._v(" "),a("h2",{attrs:{id:"配置-https-证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-https-证书"}},[s._v("#")]),s._v(" 配置 HTTPS 证书")]),s._v(" "),a("p",[s._v("为"),a("code",[s._v("GitLab")]),s._v("的ssl证书创建目录: "),a("code",[s._v("mkdir -pv /etc/gitlab/ssl")])]),s._v(" "),a("p",[s._v("修改配置文件"),a("code",[s._v("/etc/gitlab/gitlab.rb")]),s._v(":")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("external_url "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://gitlab.agou-ops.top'")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gitlab申请的域名证书")]),s._v("\nnginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redirect_http_to_https'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\nnginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ssl_certificate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/gitlab/ssl/gitlab.pem"')]),s._v("\nnginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ssl_certificate_key'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/gitlab/ssl/gitlab.key"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("更新"),a("code",[s._v("gitlab")]),s._v("的配置:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("gitlab-ctl reconfigure\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("最后修改"),a("code",[s._v("nginx")]),s._v("的配置文件"),a("code",[s._v("/etc/nginx/conf.d/gitlab.conf")]),s._v(":")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      listen *:443 ssl http2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      server_name gitlab.agou-ops.top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      error_log   /home/logs/nginx/gitlab.mydomain.com.com.error.log error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      access_log  /home/logs/nginx/gitlab.mydomain.com.access.log  main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      server_tokens off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n      client_max_body_size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      ssl on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      ssl_certificate /etc/gitlab/ssl/gitlab.pem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      ssl_certificate_key /etc/gitlab/ssl/gitlab.key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen*:80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name gitlab.agou-ops.top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rewrite^"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(".*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$https")]),s._v("://"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1permanent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# return      301 https://$server_name$request_uri;")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("重启"),a("code",[s._v("GitLab")]),s._v(":")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("gitlab-cli restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"smtp-邮件设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#smtp-邮件设置"}},[s._v("#")]),s._v(" SMTP 邮件设置")]),s._v(" "),a("p",[s._v("QQ exmail")]),s._v(" "),a("p",[s._v("QQ exmail (腾讯企业邮箱)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("gitlab_rails['smtp_enable'] = true\ngitlab_rails['smtp_address'] = \"smtp.exmail.qq.com\"\ngitlab_rails['smtp_port'] = 465\ngitlab_rails['smtp_user_name'] = \"xxxx@xx.com\"\ngitlab_rails['smtp_password'] = \"password\"\ngitlab_rails['smtp_authentication'] = \"login\"\ngitlab_rails['smtp_enable_starttls_auto'] = true\ngitlab_rails['smtp_tls'] = true\ngitlab_rails['gitlab_email_from'] = 'xxxx@xx.com'\ngitlab_rails['smtp_domain'] = \"exmail.qq.com\"\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("blockquote",[a("p",[s._v("更多邮箱格式, 参考"),a("a",{attrs:{href:"https://docs.gitlab.com/omnibus/settings/smtp.html#smtp-settings",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitLab SMTP Settings"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("重启"),a("code",[s._v("GitLab")]),s._v("服务器, 使配置生效:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("gitlab-ctl restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("测试SMTP邮件是否正常运行:")]),s._v(" "),a("h2",{attrs:{id:"testing-the-smtp-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#testing-the-smtp-configuration"}},[s._v("#")]),s._v(" Testing the SMTP configuration")]),s._v(" "),a("p",[s._v("You can verify GitLab’s ability to send emails properly using the Rails console. On the GitLab server, execute "),a("code",[s._v("gitlab-rails console")]),s._v(" to enter the console. Then, you can enter the following command at the console prompt to cause GitLab to send a test email:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@aliyun ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# gitlab-rails console\n--------------------------------------------------------------------------------\n GitLab:       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.1")]),s._v(".4 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("18c5ab32b73"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" FOSS\n GitLab Shell: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.3")]),s._v(".0\n PostgreSQL:   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.7")]),s._v("\n--------------------------------------------------------------------------------\nLoading production environment "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Rails "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.0")]),s._v(".3.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nirb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":001:"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" Notify.test_email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'destination_email@address.com'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Message Subject'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Message Body'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".deliver_now\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# press enter to test SMTP sending")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"版本升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本升级"}},[s._v("#")]),s._v(" 版本升级")]),s._v(" "),a("blockquote",[a("p",[s._v("建议升级前按照钱数备份方式，先对GitLab数据进行备份，同时备份GitLab配置文件"),a("code",[s._v("/etc/gitlab/gitlab.rb")]),s._v(",然后再执行下列步骤。")])]),s._v(" "),a("ol",[a("li",[s._v("关闭部分GitLab服务")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("gitlab-ctl stop unicorn\ngitlab-ctl stop sidekiq\ngitlab-ctl stop nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("升级GitLab")])]),s._v(" "),a("p",[s._v("GitLab 升级包下载地址："),a("code",[s._v("https://packages.gitlab.com/gitlab/gitlab-ce")]),s._v("。下载好需要的版本上传至服务器，直接运行下列命令安装就可以了。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpm -Uvh gitlab-ce-10.0.4-ce.0.el7.x86_64.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("重新配置GitLab")])]),s._v(" "),a("p",[s._v("安装完成后，根据需要修改配置文件"),a("code",[s._v("/etc/gitlab/gitlab.rb")]),s._v("，也可以直接使用原来备份好的"),a("code",[s._v("gitlab.rb")]),s._v("文件，执行重新配置命令：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("gitlab-ctl reconfigure\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("重启GitLab")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("gitlab-ctl restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),a("ul",[a("li",[s._v("GitLab installation: https://docs.gitlab.com/ee/install/")]),s._v(" "),a("li",[s._v("GitLab SMTP Settings: https://docs.gitlab.com/omnibus/settings/smtp.html#smtp-settings")])])])}),[],!1,null,null,null);t.default=e.exports}}]);