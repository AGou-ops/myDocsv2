(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{839:function(e,s,a){"use strict";a.r(s);var t=a(6),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"ceph-éƒ¨ç½²é—®é¢˜æ±‡æ€»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ceph-éƒ¨ç½²é—®é¢˜æ±‡æ€»"}},[e._v("#")]),e._v(" ceph éƒ¨ç½²é—®é¢˜æ±‡æ€»")]),e._v(" "),a("h2",{attrs:{id:"cephéƒ¨ç½²é—®é¢˜æ±‡æ€»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cephéƒ¨ç½²é—®é¢˜æ±‡æ€»"}},[e._v("#")]),e._v(" cephéƒ¨ç½²é—®é¢˜æ±‡æ€»")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("è¿è¡Œ"),a("code",[e._v("ceph-deploy --verion")]),e._v("æˆ–è€…ç›¸å…³å‘½ä»¤å‡ºç°"),a("code",[e._v('Traceback (most recent call last): File "/usr/bin/ceph-deploy", line 5, in <module> from pkg_resources import load_entry_point ImportError: No module named pkg_resources')]),e._v("æŠ¥é”™ã€‚\nè§£å†³æ–¹æ³•ï¼š")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -y python-setuptools\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])]),e._v(" "),a("li",[a("p",[e._v("è¿è¡Œ"),a("code",[e._v("ceph-deploy install")]),e._v("æ—¶å‡ºç°"),a("code",[e._v("[ceph_deploy][ERROR ] RuntimeError: Failed to execute command: yum -y install yum-plugin-priorities")]),e._v("ã€‚\nè§£å†³æ–¹æ³•ï¼š")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# å°è¯•æ¸…ç†yumç¼“å­˜å¹¶é‡å»ºç¼“å­˜")]),e._v("\nyum clean all\nyum makecache\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])])])]),e._v(" "),a("p",[e._v("æˆ–è€…å¯èƒ½æ˜¯ç”±äºç½‘ç»œåŸå› ï¼Œå¯ä»¥å•ç‹¬å¯¹å¤±è´¥çš„èŠ‚ç‚¹é‡æ–°installä¸€é")]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[e._v("è¿è¡Œ"),a("code",[e._v("ceph-deploy admin")]),e._v("åˆ†å‘å¯†é’¥æ—¶å‡ºç°"),a("code",[e._v("[ceph_deploy.admin][ERROR ] RuntimeError: config file /etc/ceph/ceph.conf exists with different content; use --overwrite-conf to ov")]),e._v("ã€‚\nè§£å†³æ–¹æ³•ï¼š")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("ceph-deploy --overwrite-conf config push stor1 stor2 stor3\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])]),e._v(" "),a("li",[a("p",[e._v("æ·»åŠ osd"),a("code",[e._v("ceph-deploy osd create")]),e._v("æ—¶å‡ºç°"),a("code",[e._v("[ceph_deploy.osd][ERROR ] Failed to execute command: /usr/sbin/ceph-volume --cluster ceph lvm create --bluestore --data /dev/sdb")]),e._v("ã€‚\nè§£å†³æ–¹æ³•ï¼š")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("è¿™é‡Œçš„key å¯ä»¥ä»"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")]),e._v("ceph auth get client.bootstrap-osd"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")])]),e._v(" é‡Œé¢å¾—åˆ°\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" /var/lib/ceph/bootstrap-osd/ceph.keyring\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("client.bootstrap-osd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n        key "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" AQD9qhRcBjs+MRAAKGOWtabeQlc/HvVa+yemv\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])])])]),e._v(" "),a("p",[e._v("å®åœ¨ä¸è¡Œæˆ–è€…åˆ é™¤æ‰é”™è¯¯èŠ‚ç‚¹çš„"),a("code",[e._v("/var/lib/ceph/bootstrap-osd/ceph.keyring")]),e._v("ï¼Œå†é‡æ–°"),a("code",[e._v("ceph-deploy admin")]),e._v("ä¸€æ¬¡")]),e._v(" "),a("p",[e._v("ğŸ™‚ ç»ˆææ–¹æ³•ï¼š")]),e._v(" "),a("p",[e._v("å¦‚æœåœ¨æŸäº›åœ°æ–¹ç¢°åˆ°éº»çƒ¦ï¼Œæƒ³ä»å¤´å†æ¥ï¼Œå¯ä»¥ç”¨ä¸‹åˆ—å‘½ä»¤æ¸…é™¤é…ç½®ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ceph-deploy purgedata {ceph-node} [{ceph-node}]\nceph-deploy forgetkeys\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("ç”¨ä¸‹åˆ—å‘½ä»¤å¯ä»¥è¿ Ceph å®‰è£…åŒ…ä¸€èµ·æ¸…é™¤ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ceph-deploy purge {ceph-node} [{ceph-node}]\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);